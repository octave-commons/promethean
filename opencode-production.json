{
  "$schema": "https://opencode.ai/config.json",
  "providers": {
    "openrouter": {
      "provider": "openrouter",
      "apiKey": "{env:OPENROUTER_API_KEY}",
      "disabled": false
    },
    "anthropic": {
      "provider": "anthropic",
      "apiKey": "{env:ANTHROPIC_API_KEY}",
      "disabled": false
    },
    "openai": {
      "provider": "openai",
      "apiKey": "{env:OPENAI_API_KEY}",
      "disabled": false
    }
  },
  "agents": {
    "senior-developer": {
      "model": "claude-4-sonnet",
      "maxTokens": 128000,
      "reasoningEffort": "high",
      "temperature": 0.1,
      "tools": {
        "allowed": ["read", "write", "edit", "bash", "serena_*", "clojure-mcp_*", "pm2_*"],
        "default": "allow"
      },
      "prompt": "{file:docs/agents/senior-developer-prompt.md}"
    },
    "security-specialist": {
      "model": "claude-4-opus",
      "maxTokens": 128000,
      "reasoningEffort": "high",
      "temperature": 0.0,
      "tools": {
        "allowed": [
          "read",
          "grep",
          "serena_find_symbol",
          "serena_search_for_pattern",
          "clj-kondo-mcp_lint_clojure"
        ],
        "default": "deny"
      },
      "prompt": "{file:docs/agents/security-specialist-prompt.md}"
    },
    "clojure-expert": {
      "model": "openrouter.qwen3-coder-408b",
      "maxTokens": 64000,
      "reasoningEffort": "high",
      "temperature": 0.2,
      "tools": {
        "allowed": [
          "clojure-mcp_*",
          "serena_*",
          "clj-kondo-mcp_lint_clojure",
          "read",
          "write",
          "edit"
        ],
        "default": "allow"
      },
      "prompt": "{file:docs/agents/clojure-expert-prompt.md}"
    },
    "system-architect": {
      "model": "o1",
      "maxTokens": 128000,
      "reasoningEffort": "high",
      "temperature": 0.1,
      "tools": {
        "allowed": [
          "read",
          "serena_get_symbols_overview",
          "serena_find_symbol",
          "webfetch",
          "web-search-prime"
        ],
        "default": "deny"
      },
      "prompt": "{file:docs/agents/system-architect-prompt.md}"
    },
    "devops-engineer": {
      "model": "openrouter.deepseek-r1",
      "maxTokens": 64000,
      "reasoningEffort": "medium",
      "temperature": 0.3,
      "tools": {
        "allowed": ["bash", "process_*", "pm2_*", "read", "write"],
        "default": "allow"
      },
      "prompt": "{file:docs/agents/devops-engineer-prompt.md}"
    },
    "code-reviewer": {
      "model": "claude-3.5-sonnet",
      "maxTokens": 64000,
      "reasoningEffort": "medium",
      "temperature": 0.2,
      "tools": {
        "allowed": [
          "read",
          "serena_find_symbol",
          "serena_search_for_pattern",
          "clj-kondo-mcp_lint_clojure",
          "clojure-mcp_clojure_eval"
        ],
        "default": "deny"
      },
      "prompt": "{file:docs/agents/code-reviewer-prompt.md}"
    },
    "test-engineer": {
      "model": "openrouter.qwen2.5-coder-7b-instruct",
      "maxTokens": 32768,
      "reasoningEffort": "medium",
      "temperature": 0.3,
      "tools": {
        "allowed": ["read", "write", "edit", "bash", "serena_*"],
        "default": "allow"
      },
      "prompt": "{file:docs/agents/test-engineer-prompt.md}"
    },
    "documentation-specialist": {
      "model": "gpt-4o",
      "maxTokens": 64000,
      "reasoningEffort": "low",
      "temperature": 0.4,
      "tools": {
        "allowed": ["read", "write", "edit", "webfetch", "web-search-prime", "context7_*"],
        "default": "allow"
      },
      "prompt": "{file:docs/agents/documentation-specialist-prompt.md}"
    }
  },
  "mcp": {
    "web-search-prime": {
      "type": "remote",
      "url": "https://api.z.ai/api/mcp/web_search_prime/mcp",
      "headers": {
        "Authorization": "Bearer {env:Z_AI_API_KEY}"
      },
      "enabled": true
    },
    "zai-mcp-server": {
      "type": "local",
      "command": ["npx", "-y", "@z_ai/mcp-server"],
      "environment": {
        "Z_AI_API_KEY": "{env:Z_AI_API_KEY}",
        "Z_AI_MODE": "ZAI"
      },
      "enabled": true
    },
    "playwright": {
      "type": "local",
      "command": ["npx", "-y", "@playwright/mcp@latest"],
      "enabled": true
    },
    "serena": {
      "type": "local",
      "command": [
        "uvx",
        "--from",
        "git+https://github.com/oraios/serena",
        "serena",
        "start-mcp-server"
      ],
      "enabled": true
    },
    "clojure-mcp": {
      "type": "local",
      "command": ["clojure", "-X:mcp"],
      "environment": {
        "CLOJURE_MCP_PORT": "7888"
      },
      "enabled": true
    },
    "clj-kondo-mcp": {
      "type": "local",
      "command": ["npx", "clj-kondo-mcp"],
      "enabled": true
    },
    "context7": {
      "type": "remote",
      "url": "https://mcp.context7.com/mcp",
      "headers": {
        "CONTEXT7_API_KEY": "{env:CONTEXT7_API_KEY}"
      },
      "enabled": true
    },
    "gh_grep": {
      "type": "remote",
      "url": "https://mcp.grep.app"
    }
  },
  "lsp": {
    "clojure-lsp": {
      "command": ["clojure-lsp"],
      "extensions": [".clj", ".cljs", ".cljc", ".bb"],
      "initialization": {
        "settings": {
          "clojure-lsp": {
            "additional-suffixes": [".cljs", ".cljc", ".clj", ".bb"],
            "source-paths": [
              "bb/src",
              "mk",
              "packages/*/src",
              "packages/*/src/cljs",
              "packages/*/src/main",
              "docs/agile/rules",
              "packages/clj-hacks/src",
              "packages/clj-hacks/verify.clj"
            ],
            "test-paths": ["packages/*/test", "bb/test", "packages/clj-hacks/test"],
            "source-paths-ignore-regex": [
              "resources.*",
              "target.*",
              "node_modules.*",
              "dist.*",
              "build.*",
              "\\.direnv.*",
              "\\.venv.*",
              "\\.cache.*",
              "packages/*/dist.*",
              "packages/*/out.*",
              "\\.clj-kondo.*",
              "test-comprehensive.*",
              "test-kanban.*",
              "test-timestamp.*",
              "simple-test.*"
            ],
            "clj-kondo": {
              "config-dir": ".clj-kondo"
            },
            "project-specs": {
              "shadow-cljs": {
                "project-type": "shadow-cljs",
                "shadow-cljs-config": "shadow-cljs.edn"
              },
              "clj-hacks": {
                "project-type": "gradle",
                "root": "packages/clj-hacks",
                "source-paths": ["src"],
                "test-paths": ["test"]
              }
            }
          }
        }
      }
    }
  },
  "instructions": ["./docs/agents/opencode.md"],
  "tools": {
    "webfetch": true,
    "web-search-prime": true,
    "playwright": true,
    "zai-mcp-server_analyze_image": true,
    "zai-mcp-server_analyze_video": true,
    "process_start": true,
    "process_stop": true,
    "process_err": true,
    "process_tail": true,
    "process_list": true,
    "process_status": true,
    "clojure-lsp": true,
    "clojure-mcp_clojure_eval": true,
    "clojure-mcp_clojure_edit": true,
    "clojure-mcp_read_file": true,
    "clojure-mcp_ls": true,
    "clojure-mcp_grep": true,
    "clojure-mcp_glob_files": true,
    "clj-kondo-mcp_lint_clojure": true,
    "ollama-queue_submitJob": true,
    "ollama-queue_getJobStatus": true,
    "ollama-queue_getJobResult": true,
    "ollama-queue_listJobs": true,
    "ollama-queue_cancelJob": true,
    "ollama-queue_listModels": true,
    "ollama-queue_getQueueInfo": true,
    "pm2_startProcess": true,
    "pm2_stopProcess": true,
    "pm2_restartProcess": true,
    "pm2_deleteProcess": true,
    "pm2_listProcesses": true,
    "pm2_showProcessInfo": true,
    "pm2_showLogs": true,
    "pm2_flushLogs": true,
    "pm2_reloadLogs": true,
    "pm2_monitor": true,
    "pm2_saveProcessList": true,
    "pm2_resurrectProcesses": true,
    "pm2_startup": true,
    "pm2_generateStartupScript": true,
    "pm2_getPM2Version": true,
    "pm2_resetMetadata": true,
    "pm2_describeProcess": true,
    "pm2_scaleProcess": true,
    "pm2_reloadProcess": true,
    "pm2_gracefulReload": true,
    "pm2_killPM2": true,
    "pm2_getPM2Status": true,
    "session-info": true
  }
}
