services:
  # Test HTTP server with volume mount
  test-server:
    image: node:22-alpine
    working_dir: /app
    volumes:
      - ./test-server.js:/app/server.js:ro
    command: ['node', 'server.js']
    ports:
      - '3010:3010'
    networks:
      - test-network
    restart: unless-stopped
    healthcheck:
      test: ['CMD', 'wget', '--no-verbose', '--tries=1', '--spider', 'http://localhost:3010']
      interval: 5s
      timeout: 3s
      retries: 3
      start_period: 5s

networks:
  test-network:
    driver: bridge
