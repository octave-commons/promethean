[
  {
    "name": "semver-guard",
    "steps": [
      {
        "id": "sv-snapshot",
        "js": {
          "module": "scripts/piper-semverguard.mjs",
          "export": "snapshot",
          "args": {
            "root": "packages",
            "tsconfig": "./tsconfig.json",
            "out": ".cache/semverguard/snapshot.json"
          }
        },
        "inputs": [
          "packages/**/package.json",
          "packages/**/{src,lib}/**/*.{ts,tsx,js,jsx}"
        ],
        "inputSchema": "packages/semverguard/schemas/io.schema.json",
        "outputs": [".cache/semverguard/snapshot.json"],
        "outputSchema": "packages/semverguard/schemas/io.schema.json"
      },
      {
        "id": "sv-diff",
        "deps": ["sv-snapshot"],
        "js": {
          "module": "scripts/piper-semverguard.mjs",
          "export": "diff",
          "args": {
            "current": ".cache/semverguard/snapshot.json",
            "baseline": "git:origin/main:.cache/semverguard/snapshot.json",
            "out": ".cache/semverguard/diff.json"
          }
        },
        "inputs": [".cache/semverguard/snapshot.json"],
        "inputSchema": "packages/semverguard/schemas/io.schema.json",
        "outputs": [".cache/semverguard/diff.json"],
        "outputSchema": "packages/semverguard/schemas/io.schema.json"
      },
      {
        "id": "sv-plan",
        "deps": ["sv-diff"],
        "js": {
          "module": "scripts/piper-semverguard.mjs",
          "export": "plan",
          "args": {
            "diff": ".cache/semverguard/diff.json",
            "out": ".cache/semverguard/plans.json",
            "model": "qwen3:4b"
          }
        },
        "inputs": [".cache/semverguard/diff.json"],
        "inputSchema": "packages/semverguard/schemas/io.schema.json",
        "outputs": [".cache/semverguard/plans.json"],
        "outputSchema": "packages/semverguard/schemas/io.schema.json"
      },
      {
        "id": "sv-write",
        "deps": ["sv-plan"],
        "js": {
          "module": "scripts/piper-semverguard.mjs",
          "export": "write",
          "args": {
            "plans": ".cache/semverguard/plans.json",
            "out": "docs/agile/tasks/semver"
          }
        },
        "inputs": [".cache/semverguard/plans.json"],
        "inputSchema": "packages/semverguard/schemas/io.schema.json",
        "outputs": ["docs/agile/tasks/semver/*.md"],
        "outputSchema": "packages/semverguard/schemas/io.schema.json"
      },
      {
        "id": "sv-pr",
        "deps": ["sv-write"],
        "js": {
          "module": "scripts/piper-semverguard.mjs",
          "export": "pr",
          "args": {
            "plans": ".cache/semverguard/plans.json",
            "root": "packages",
            "mode": "prepare",
            "updateDependents": true,
            "depRange": "preserve"
          }
        },
        "inputs": [".cache/semverguard/plans.json", "packages/**/package.json"],
        "inputSchema": "packages/semverguard/schemas/io.schema.json",
        "outputs": [".cache/semverguard/pr/summary.json"],
        "outputSchema": "packages/semverguard/schemas/io.schema.json"
      }
    ]
  }
]
