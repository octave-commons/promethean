{
  "pipelines": [
    {
      "name": "board-review",
      "steps": [
        {
          "id": "br-fm",
          "shell": "pnpm --filter @promethean/boardrev br:01-fm",
          "inputs": ["docs/agile/tasks/**/*.md"],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": ["docs/agile/tasks/**/*.md"],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        },
        {
          "id": "br-prompts",
          "deps": ["br-fm"],
          "shell": "pnpm --filter @promethean/boardrev br:02-prompts --process docs/agile/Process.md --out .cache/boardrev/prompts.json",
          "inputs": ["docs/agile/Process.md"],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": [".cache/boardrev/prompts.json"],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        },
        {
          "id": "br-index",
          "deps": ["br-fm", "OLLAMA_URL"],
          "shell": "pnpm --filter @promethean/boardrev br:03-index --globs \"{README.md,docs/**/*.md,packages/**/{src,lib}/**/*.{ts,tsx,js,jsx}}\"",
          "env": {
            "OLLAMA_URL": "${OLLAMA_URL}"
          },
          "inputs": [
            "README.md",
            "docs/**/*.md",
            "packages/**/{src,lib}/**/*.{ts,tsx,js,jsx}"
          ],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": [
            ".cache/boardrev/repo-index.json",
            ".cache/boardrev/repo-embeddings.json"
          ],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        },
        {
          "id": "br-match",
          "deps": ["br-prompts", "br-index"],
          "shell": "pnpm --filter @promethean/boardrev br:04-match --tasks docs/agile/tasks --k 8",
          "inputs": [
            "docs/agile/tasks/**/*.md",
            ".cache/boardrev/repo-index.json",
            ".cache/boardrev/repo-embeddings.json"
          ],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": [".cache/boardrev/context.json"],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        },
        {
          "id": "br-eval",
          "deps": ["br-match"],
          "shell": "pnpm --filter @promethean/boardrev br:05-eval --model qwen3:4b",
          "env": {
            "OLLAMA_URL": "${OLLAMA_URL}"
          },
          "inputs": [
            ".cache/boardrev/prompts.json",
            ".cache/boardrev/context.json"
          ],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": [".cache/boardrev/evals.json"],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        },
        {
          "id": "br-report",
          "deps": ["br-eval"],
          "shell": "pnpm --filter @promethean/boardrev br:06-report --outDir docs/agile/reports",
          "inputs": [".cache/boardrev/evals.json"],
          "inputSchema": "packages/boardrev/schemas/io.schema.json",
          "outputs": ["docs/agile/reports/*.md"],
          "outputSchema": "packages/boardrev/schemas/io.schema.json"
        }
      ]
    }
  ]
}
