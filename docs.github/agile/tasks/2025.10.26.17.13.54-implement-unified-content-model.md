# Implement Unified Content Model

## Overview
Design and implement unified IndexableContent interface to standardize data structures across all indexing systems (files, messages, events, attachments).

## Context
Current indexing systems use inconsistent data models:
- DualStoreEntry<TextKey, TimeKey>
- ContextMessage with role/content/images
- IndexedFile with path/content/metadata
- Discord message/attachment structures

## Acceptance Criteria
- [ ] Unified IndexableContent interface designed
- [ ] Transformation functions for each content type
- [ ] Validation and type safety for unified model
- [ ] Migration utilities for existing data
- [ ] Documentation and examples

## Implementation Plan
1. **Phase 1**: Design IndexableContent interface
2. **Phase 2**: Create transformation functions
3. **Phase 3**: Implement validation and type checking
4. **Phase 4**: Add migration utilities
5. **Phase 5**: Update existing indexers to use unified model

## Technical Details
### Target Interface Design
```typescript
interface IndexableContent {
  id: string;
  type: 'file' | 'message' | 'event' | 'session' | 'attachment';
  content: string;
  metadata: Record<string, any>;
  timestamp: number;
  source: string;
  // Optional fields for specific content types
  attachments?: Attachment[];
  author?: string;
  space?: string;
}
```

### Transformation Requirements
- File system content → IndexableContent
- Discord messages → IndexableContent
- OpenCode events → IndexableContent
- Context messages → IndexableContent
- Backward compatibility for existing consumers

## Dependencies
- Design unified indexing architecture (prerequisite)

## Risks
- Data loss during transformation
- Performance impact of transformations
- Backward compatibility issues
- Complex metadata mapping

## Tags
indexing,data-model,unified,design

## Complexity Score
5 (clear interface design with transformation complexity)

## Status
incoming
