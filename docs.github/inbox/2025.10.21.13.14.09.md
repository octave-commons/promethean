why isn't this working then

## package.json

```json
{
  "type": "module",
  "name": "promethean",
  "license": "GPL-3.0-only",
  "version": "0.0.0",
  "scripts": {
    "build": "pnpm -r --no-bail build",
    "buildfix": "pnpm exec buildfix",
    "build:all": "node ./scripts/run-nx-task.mjs build all",
    "build:cross-platform": "node ./scripts/cross-platform-build.js all",
    "docker:build": "bash ./scripts/docker-build-cross-platform.sh",
    "docker:build:push": "bash ./scripts/docker-build-cross-platform.sh --push",
    "docker:dev": "docker-compose -f docker-compose.dev.yml up --build",
    "docker:dev:down": "docker-compose -f docker-compose.dev.yml down",
    "docker:dev:logs": "docker-compose -f docker-compose.dev.yml logs -f",
    "test:cross-platform": "node ./scripts/cross-platform-test.js all",
    "test:cross-platform:unit": "node ./scripts/cross-platform-test.js unit",
    "test:cross-platform:e2e": "node ./scripts/cross-platform-test.js e2e",
    "test:cross-platform:performance": "node ./scripts/cross-platform-test.js performance",
    "build:affected": "node ./scripts/run-nx-task.mjs build affected",
    "build:selection": "node ./scripts/run-nx-task.mjs build selection",
    "build:tagged": "node ./scripts/run-nx-task.mjs build tagged",
    "duck:web": "pnpm --filter @promethean-os/duck-web-frontend dev",
    "duck:gateway": "pnpm --filter @promethean-os/enso-browser-gateway dev",
    "mcp:generate": "cd packages/clj-hacks && clojure -M:mcp-cli push-all --edn /home/err/devel/promethean/packages/mcp/config/mcp_servers.edn",
    "mcp:promethean": "cd packages/clj-hacks && clojure -M:mcp-cli push promethean.json /home/err/devel/promethean/promethean.mcp.json --edn /home/err/devel/promethean/packages/mcp/config/mcp_servers.edn",
    "mcp:claude-code": "cd packages/clj-hacks && clojure -M:mcp-cli push claude-code.json /home/err/devel/promethean/.mcp.json --edn /home/err/devel/promethean/packages/mcp/config/mcp_servers.edn",
    "mcp:all": "pnpm mcp:promethean && pnpm mcp:claude-code",
    "mcp:doctor": "cd packages/clj-hacks && clojure -M:mcp-cli doctor --edn /home/err/devel/promethean/packages/mcp/config/mcp_servers.edn",
    "generate_mcp_configs": "pnpm mcp:generate",
    "coverage": "c8 --all --reporter=text --reporter=lcov ava --config ./config/ava.config.mjs \"services/**/dist/**/*.test.js\" \"packages/**/dist/**/*.test.js\" \"shared/**/dist/**/*.test.js\" \"tests/**/*.js\"",
    "coverage:unit": "node ./scripts/run-nx-task.mjs coverage:unit all",
    "coverage:unit:affected": "node ./scripts/run-nx-task.mjs coverage:unit affected",
    "coverage:integration": "node ./scripts/run-nx-task.mjs coverage:integration all",
    "coverage:integration:affected": "node ./scripts/run-nx-task.mjs coverage:integration affected",
    "coverage:e2e": "node ./scripts/run-nx-task.mjs coverage:e2e all",
    "coverage:e2e:affected": "node ./scripts/run-nx-task.mjs coverage:e2e affected",
    "coverage:separate": "pnpm coverage:unit && pnpm coverage:integration && pnpm coverage:e2e && node ./scripts/merge-coverage.js",
    "migrate:tests": "node scripts/migrate-tests.js",
    "test:all:nx": "node ./scripts/run-nx-task.mjs test all",
    "test:affected": "node ./scripts/run-nx-task.mjs test affected",
    "test:selection": "node ./scripts/run-nx-task.mjs test selection",
    "test:tagged": "node ./scripts/run-nx-task.mjs test tagged",
    "test:all": "node ./tools/run-test-coverage.mjs",
    "test:coverage:unified": "node ./tools/unified-test-coverage.mjs",
    "test:unit": "node ./scripts/run-nx-task.mjs test:unit all",
    "test:unit:affected": "node ./scripts/run-nx-task.mjs test:unit affected",
    "test:integration": "node ./scripts/run-nx-task.mjs test:integration all",
    "test:integration:affected": "node ./scripts/run-nx-task.mjs test:integration affected",
    "test:e2e": "node ./scripts/run-nx-task.mjs test:e2e all",
    "test:e2e:affected": "node ./scripts/run-nx-task.mjs test:e2e affected",
    "lint:all": "node ./scripts/run-nx-task.mjs lint all",
    "lint:affected": "node ./scripts/run-nx-task.mjs lint affected",
    "lint:selection": "node ./scripts/run-nx-task.mjs lint selection",
    "lint:tagged": "node ./scripts/run-nx-task.mjs lint tagged",
    "typecheck:all": "node ./scripts/run-nx-task.mjs typecheck all",
    "typecheck:affected": "node ./scripts/run-nx-task.mjs typecheck affected",
    "typecheck:selection": "node ./scripts/run-nx-task.mjs typecheck selection",
    "typecheck:tagged": "node ./scripts/run-nx-task.mjs typecheck tagged",
    "clean:all": "node ./scripts/run-nx-task.mjs clean all",
    "clean:build": "pnpm clean:deep && pnpm install && pnpm -r --no-bail build",
    "clean:affected": "node ./scripts/run-nx-task.mjs clean affected",
    "clean:selection": "node ./scripts/run-nx-task.mjs clean selection",
    "clean:tagged": "node ./scripts/run-nx-task.mjs clean tagged",
    "build:docs": "node scripts/generate-service-docs.js",
    "health:node-abi": "node -p \"process.versions.node + ' ABI ' + process.versions.modules\"",
    "prepare": "node ./scripts/ensure-cli-perms.mjs",
    "lint": "eslint --cache ./packages",
    "lint:diff": "bash ./bin/lint-diff-ts.sh",
    "opencode": "node ./packages/opencode-client/dist/cli.js",
    "opencode-cli": "node ./packages/opencode-client/dist/cli.js",
    "format": "prettier --write .",
    "lint:tasks": "tsx scripts/lint_tasks.ts",
    "changelog:check": "tsx scripts/check_changelog.ts",
    "changelog:check-fragments": "tsx scripts/check_changelog_fragments.ts",
    "script:lint-tasks": "tsx --tsconfig tsconfig.scripts.json scripts/lint_tasks.ts",
    "postinstall": "pnpm --filter @promethean-os/embedding^... run build && pnpm --filter @promethean-os/piper^... run build && pnpm --filter @promethean-os/piper run build && pnpm --filter @promethean-os/promethean-cli run build",
    "generateBuildErrorReport": "pnpm -r --no-bail build | grep 'error' -i >|build-errors.txt",
    "check:flat": "node scripts/check-flat.js",
    "enforce:esm-ext": "eslint \"packages/**/src/**/*.{ts,tsx}\" --rule 'import/extensions: [2, \"always\", { ignorePackages: true }]'",
    "dev:all": "node scripts/dev.mjs",
    "gen:ecosystem": "pnpm --filter @promethean-os/shadow-conf build && pnpm exec shadow-conf ecosystem --input-dir ./system/daemons --out .",
    "lint:dup": "jscpd --min-tokens 30 packages",
    "sync:github:test": "node packages/github-sync/src/test-github-sync.mjs",
    "sync:github": "cd packages/github-sync && node dist/index.js",
    "sync:kanban": "CLASSIC_GITHUB_TOKEN=${CLASSIC_GITHUB_TOKEN} node packages/github-sync/src/complete-kanban-sync.mjs",
    "build:github-sync": "cd packages/github-sync && pnpm build",
    "test:trello": "node packages/trello/src/test-trello-connection.ts",
    "sync:trello": "cd packages/trello && pnpm run build && node dist/cli/sync-kanban-to-trello.js",
    "build:trello": "cd packages/trello && pnpm build",
    "lint:unused": "ts-unused-exports tsconfig.json --showLineNumbers",
    "clean": "pnpm -r exec bash -lc 'rm -rf dist build coverage .turbo .cache .vite .parcel-cache .rollup.cache .ava .ava_cache .eslintcache *.tsbuildinfo playwright-report test-results || true' && rm -rf .turbo pnpm-debug.log*",
    "clean:changed": "pnpm -r --filter \"...[dev]\" exec bash -lc 'rm -rf dist build coverage .turbo .cache .vite .parcel-cache .rollup.cache .ava .ava_cache .eslintcache *.tsbuildinfo playwright-report test-results || true'",
    "clean:deep": "pnpm run clean && pnpm -r exec bash -lc 'rm -rf node_modules || true' && rm -rf node_modules && pnpm store prune",
    "nx": "nx",
    "shadow:build": "pnpm --filter @promethean-os/shadow-ui run build && pnpm --filter '@promethean-os/*-frontend' run build:shadow",
    "shadow:watch": "pnpm --filter @promethean-os/shadow-ui run watch",
    "shadow:watch:frontends": "pnpm --parallel --filter '@promethean-os/*-frontend' run watch:shadow",
    "create-mutaant": "pnpm exec buildfix create-mutaant",
    "pipeline:optimize": "node scripts/pipeline-optimizer.mjs",
    "pipeline:analyze": "node scripts/pipeline-optimizer.mjs --analyze-only"
  },
  "bin": {
    "prom": "./packages/promethean-cli/dist/promethean_cli.cjs",
    "promethean": "./packages/promethean-cli/dist/promethean_cli.cjs"
  },
  "dependencies": {
    "@nrwl/nx-cloud": "^19.1.0",
    "@platformatic/mcp": "^1.2.2",
    "@promethean-os/autocommit": "workspace:*",
    "@promethean-os/buildfix": "workspace:*",
    "@promethean-os/duck-web-frontend": "workspace:*",
    "@promethean-os/image-link-generator": "workspace:*",
    "@promethean-os/kanban": "workspace:*",
    "@promethean-os/legacy": "workspace:*",
    "@promethean-os/level-cache": "workspace:*",
    "@promethean-os/markdown": "workspace:*",
    "@promethean-os/mcp-dev-ui-frontend": "workspace:*",
    "@promethean-os/openai-server-frontend": "workspace:*",
    "@promethean-os/opencode-client": "workspace:*",
    "@promethean-os/opencode-session-manager-frontend": "workspace:*",
    "@promethean-os/persistence": "workspace:*",
    "@promethean-os/piper": "workspace:*",
    "@promethean-os/piper-frontend": "workspace:*",
    "@promethean-os/pm2-helpers": "workspace:*",
    "@promethean-os/report-forge-frontend": "workspace:*",
    "@promethean-os/shadow-conf": "workspace:*",
    "@promethean-os/smartgpt-dashboard-frontend": "workspace:*",
    "@promethean-os/utils": "workspace:*",
    "@xenova/transformers": "2.17.2",
    "ava": "6.4.1",
    "c8": "10.1.3",
    "chromadb": "^3.0.17",
    "dotenv": "17.2.1",
    "gray-matter": "4.0.3",
    "http-proxy": "1.18.1",
    "mcp-auth": "^0.1.1",
    "mongodb": "6.18.0",
    "nbb": "^1.3.204",
    "nx-cloud": "^19.1.0",
    "pm2": "6.0.8",
    "remark-parse": "11.0.0",
    "rimraf": "6.0.1",
    "source-map-support": "0.5.21",
    "string-argv": "^0.3.2",
    "ts-node": "10.9.2",
    "type-fest": "^4.41.0",
    "unified": "11.0.5",
    "unist-util-visit": "5.0.0",
    "ws": "8.18.3",
    "yaml": "2.8.1",
    "zod": "3.25.76"
  },
  "devDependencies": {
    "@nx/devkit": "21.4.1",
    "@nx/node": "^21.6.4",
    "@playwright/mcp": "0.0.42",
    "@playwright/test": "1.56.0",
    "@promethean-os/test-utils": "workspace:*",
    "@types/mongodb": "4.0.6",
    "@types/node": "20.19.11",
    "@typescript-eslint/eslint-plugin": "8.42.0",
    "@typescript-eslint/parser": "8.42.0",
    "@typescript-eslint/type-utils": "8.42.0",
    "@typescript-eslint/utils": "8.42.0",
    "eslint": "9.33.0",
    "eslint-plugin-ava": "15.1.0",
    "eslint-plugin-functional": "9.0.2",
    "eslint-plugin-import": "2.32.0",
    "eslint-plugin-promise": "7.2.1",
    "globby": "^15.0.0",
    "jiti": "2.5.1",
    "node-gyp": "11.4.2",
    "nx": "20.0.0",
    "playwright": "1.56.0",
    "prettier": "3.3.3",
    "puppeteer": "24.16.0",
    "tsx": "4.20.3",
    "typescript": "5.9.3",
    "typescript-eslint": "8.42.0",
    "typescript-language-server": "4.4.1"
  },
  "packageManager": "pnpm@10.16.1",
  "volta": {
    "node": "22.20.0",
    "pnpm": "10.16.1"
  },
  "engines": {
    "node": "22.20.0"
  }
}
```

## pnpm-workspace.yaml
```yaml
packages:
  - packages/*
  - packages/*/*
  - .opencode/*
  - scripts/*/*
  - tools/
# Exclude benchmark fixtures with intentional errors
ignore:
  - packages/buildfix/benchmark-fixtures
  - packages/buildfix/simple-benchmark-temp
  - packages/buildfix/large-benchmark-temp
  - packages/buildfix/test-fixtures
  - packages/buildfix/simple-fixtures
  - packages/buildfix/test-tmp

pnpm:
  overrides:
    tinyglobby:
      '@types/node': '20.19.11'
```
## packages/kanban/package.json
this won't work when I run `pnpm kanban`
```json
{
  "name": "@promethean-os/kanban",
  "version": "0.2.0",
  "description": "Automation for local markdown kanban and process-as-code. Functional TS, native ESM, no side effects.",
  "type": "module",
  "main": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "keywords": [
    "kanban",
    "markdown",
    "task-management",
    "cli",
    "automation",
    "process-as-code"
  ],
  "author": "Promethean Framework",
  "license": "GPL-3.0-only",
  "repository": {
    "type": "git",
    "url": "https://github.com/promethean-framework/promethean.git",
    "directory": "packages/kanban"
  },
  "bugs": {
    "url": "https://github.com/promethean-framework/promethean/issues"
  },
  "homepage": "https://github.com/promethean-framework/promethean/tree/main/packages/kanban",
  "engines": {
    "node": ">=18.0.0"
  },
  "exports": {
    ".": {
      "types": "./dist/index.d.ts",
      "import": "./dist/index.js"
    },
    "./lib/*": {
      "types": "./dist/lib/*.d.ts",
      "import": "./dist/lib/*.js"
    },
    "./board/config": {
      "types": "./dist/board/config.d.ts",
      "import": "./dist/board/config.js"
    },
    "./lib/kanban": {
      "types": "./dist/lib/kanban.d.ts",
      "import": "./dist/lib/kanban.js"
    },
    "./lib/types": {
      "types": "./dist/lib/types.d.ts",
      "import": "./dist/lib/types.js"
    }
  },
  "bin": {
    "kanban": "bin/kanban"
  },
  "scripts": {
    "build": "tsc -b tsconfig.json --force",
    "build:cljs": "shadow-cljs release kanban-frontend",
    "build:docs": "typedoc --options typedoc.json",
    "dev:cljs": "shadow-cljs watch kanban-frontend",
    "prepack": "pnpm run build && pnpm run build:cljs",
    "test": "pnpm run build && ava"
  },
  "dependencies": {
    "@promethean-os/lmdb-cache": "workspace:*",
    "@promethean-os/markdown": "workspace:*",
    "@promethean-os/utils": "workspace:*",
    "@promethean-os/agents-workflow": "workspace:*",
    "chokidar": "^4.0.1",
    "globby": "^14.0.2",
    "gray-matter": "^4.0.3",
    "mongodb": "^6.18.0",
    "simple-git": "^3.27.0",
    "ws": "^8.18.0",
    "xml2js": "^0.6.2",
    "js-yaml": "^4.1.0",
    "yaml": "^2.5.0"
  },
  "devDependencies": {
    "@cljs-oss/module-deps": "^1.1.1",
    "@microsoft/tsdoc": "^0.15.1",
    "@types/js-yaml": "^4.0.5",
    "@types/ws": "^8.5.0",
    "@types/xml2js": "^0.4.11",
    "esmock": "^2.7.3",
    "garden": "^0.52.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "shadow-cljs": "^2.28.17",
    "typedoc": "^0.28.13",
    "typedoc-plugin-markdown": "^4.9.0",
    "typescript": "^5.4.0",
    "vitest": "^1.0.0",
    "tempy": "^3.1.0"
  },
  "publishConfig": {
    "access": "public",
    "directory": "dist"
  }
}
```

## packages/pipelines/piper/package.json

but this one works `pnpm piper ...`
```json

{
  "name": "@promethean-os/piper",
  "version": "0.1.0",
  "type": "module",
  "bin": {
    "piper": "bin/piper.js"
  },
  "scripts": {
    "build": "tsc -b tsconfig.json --force",
    "typecheck": "tsc -p tsconfig.json --noEmit",
    "test": "pnpm build && ava",
    "coverage": "c8 -r text -r lcov ava",
    "clean": "rimraf dist",
    "prepack": "pnpm run build",
    "dev-ui": "pnpm build && node dist/dev-ui.js"
  },
  "exports": {
    ".": {
      "import": "./dist/index.js",
      "types": "./dist/index.d.ts"
    }
  },
  "dependencies": {
    "@fastify/rate-limit": "10.3.0",
    "@fastify/static": "8.2.0",
    "@fastify/swagger": "9.5.1",
    "@fastify/swagger-ui": "5.2.3",
    "@promethean-os/fs": "workspace:*",
    "@promethean-os/level-cache": "workspace:*",
    "@promethean-os/ui-components": "workspace:*",
    "@promethean-os/utils": "workspace:*",
    "ajv": "8.17.1",
    "chokidar": "3.6.0",
    "es-module-lexer": "1.5.1",
    "fastify": "5.3.2",
    "globby": "14.0.2",
    "jsonc-parser": "3.3.1",
    "zod": "3.23.8"
  },
  "devDependencies": {
    "@promethean-os/test-utils": "workspace:*",
    "happy-dom": "18.0.1"
  }
}
```
