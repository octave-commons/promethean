
"smart_sources:docs/agile/tasks/2025.10.08.15.30.00-fix-kanban-config-resolution.md": {"path":"docs/agile/tasks/2025.10.08.15.30.00-fix-kanban-config-resolution.md","last_embed":{"hash":null},"embeddings":{},"last_read":{"hash":"1uqb2cz","at":1762869270906},"class_name":"SmartSource","last_import":{"mtime":1762546647530,"size":4528,"at":1762869271120,"hash":"1uqb2cz"},"blocks":{"#---frontmatter---":[1,21],"##Context":[23,31],"##Context#{1}":[25,26],"##Context#{2}":[27,27],"##Context#{3}":[28,28],"##Context#{4}":[29,29],"##Context#{5}":[30,31],"##Problem":[32,37],"##Problem#{1}":[34,37],"##Solution":[38,44],"##Solution#{1}":[40,40],"##Solution#{2}":[41,41],"##Solution#{3}":[42,42],"##Solution#{4}":[43,44],"##Acceptance Criteria":[45,52],"##Acceptance Criteria#{1}":[47,47],"##Acceptance Criteria#{2}":[48,48],"##Acceptance Criteria#{3}":[49,49],"##Acceptance Criteria#{4}":[50,50],"##Acceptance Criteria#{5}":[51,52],"##Technical Details":[53,71],"##Technical Details#{1}":[55,56],"##Technical Details#{2}":[57,57],"##Technical Details#{3}":[58,59],"##Technical Details#{4}":[60,61],"##Technical Details#{5}":[62,62],"##Technical Details#{6}":[63,64],"##Technical Details#{7}":[65,66],"##Technical Details#{8}":[67,67],"##Technical Details#{9}":[68,68],"##Technical Details#{10}":[69,69],"##Technical Details#{11}":[70,71]},"outlinks":[],"metadata":{"uuid":"2c7e9d46-09b2-4670-a3ac-381cb4f0c21e","title":"Task 2c7e9d46","slug":"2025.10.08.15.30.00-fix-kanban-config-resolution","status":"icebox","priority":"P1","labels":["bug","cli","config","kanban"],"created_at":"2025-10-13T06:32:03.263Z","estimates":{"complexity":"","scale":"","time_to_completion":""},"lastCommitSha":"10c74bcdaba8e8e9b62de014a34c9ff90feb31e6","commitHistory":[{"sha":"10c74bcdaba8e8e9b62de014a34c9ff90feb31e6","timestamp":"2025-10-24 15:42:45 -0500\n\ndiff --git a/packages/data-stores/src/tests/data-store-manager.test.ts b/packages/data-stores/src/tests/data-store-manager.test.ts\nindex 18e29fd7e..85957a4bc 100644\n--- a/packages/data-stores/src/tests/data-store-manager.test.ts\n+++ b/packages/data-stores/src/tests/data-store-manager.test.ts\n@@ -7,55 +7,166 @@ import {\n   OPENCODE_STORES,\n   FILE_SYSTEM_STORES,\n } from '../index.js';\n+import { ContextStore, __setContextStoreDualFactoryForTests } from '@promethean-os/persistence';\n+import type { DualStoreEntry, DualStoreManager } from '@promethean-os/persistence';\n+\n+type QueryOptions = { limit?: number };\n+\n+const normaliseTimestamp = (value: unknown): number => {\n+  if (value instanceof Date) return value.getTime();\n+  if (typeof value === 'number') return value;\n+  if (typeof value === 'string') return new Date(value).getTime();\n+  return Date.now();\n+};\n+\n+type StoredEntry = DualStoreEntry<'text', 'timestamp'>;\n+\n+class StubDualStore {\n+  readonly name: string;\n+  private readonly textKey: string;\n+  private readonly timeStampKey: string;\n+  private readonly docs: StoredEntry[] = [];\n+  readonly supportsImages = false;\n+  agent_name = 'stub-agent';\n+  embedding_fn = 'stub-embedding';\n+  readonly chromaCollection = {} as unknown;\n+  readonly mongoCollection = {} as unknown;\n+\n+  constructor(name: string, textKey: string, timeStampKey: string) {\n+    this.name = name;\n+    this.textKey = textKey;\n+    this.timeStampKey = timeStampKey;\n+  }\n+\n+  private toStoredEntry(entry: DualStoreEntry<string, string>): StoredEntry {\n+    const rawText = entry[this.textKey as keyof typeof entry];\n+    const text = typeof rawText === 'string' ? rawText : '';\n+    const rawTimestamp = entry[this.timeStampKey as keyof typeof entry];\n+    const timestamp =\n+      rawTimestamp !== undefined ? rawTimestamp : (entry.timestamp as unknown as number","message":"Update task: 2c7e9d46-09b2-4670-a3ac-381cb4f0c21e - Update task: Task 2c7e9d46","author":"Error","type":"update"}]},"task_lines":[47,48,49,50,51]},