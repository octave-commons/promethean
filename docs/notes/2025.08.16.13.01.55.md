You’re right—this generator drops the WIP info in headers. Here’s a **minimal, safe patch** that preserves whatever was in each header (e.g., `## Prompt Refinement (3)` or emojis). It captures the **exact existing header text** per status and re-emits it, so your WIP limits stay intact.

### Patch (copy-paste)

```diff
@@
 TASK_DIR = Path("docs/agile/tasks")
 BOARD_PATH = Path("docs/agile/boards/kanban.md")
@@
 def extract_settings_block(board_path: Path) -> str | None:
@@
     return "\n".join(lines[start_idx : end_idx + 1]) + "\n"
 
@@
 def build_board(
     tasks: Dict[str, List[Tuple[str, Path]]],
     unlinked: Dict[str, List[str]],
     settings_block: str | None,
+    header_labels: Dict[str, str],
     *,
     wikilinks: bool,
     encode_urls: bool,
 ) -> str:
@@
-    lines: List[str] = ["---", "", "kanban-plugin: board", "", "---", ""]
+    lines: List[str] = ["---", "", "kanban-plugin: board", "", "---", ""]
     for status in STATUS_ORDER:
         linked_items = tasks.get(status, [])
         unlinked_items = unlinked.get(status, [])
 
         if not linked_items and not unlinked_items:
             continue
 
-        header = status.lstrip("#").replace("-", " ").title()
-        lines.append(f"## {header}")
+        # Prefer the exact header from the existing board (preserves WIP limits like '(3)'),
+        # otherwise fall back to a normalized title.
+        header = header_labels.get(
+            status,
+            status.lstrip("#").replace("-", " ").title()
+        )
+        lines.append(f"## {header}")
         lines.append("")
@@
 def main() -> None:
@@
-    settings_block = extract_settings_block(BOARD_PATH)
+    settings_block = extract_settings_block(BOARD_PATH)
+    header_labels = extract_header_labels(BOARD_PATH)
@@
-    board = build_board(
+    board = build_board(
         tasks,
         unlinked,
         settings_block,
+        header_labels,
         wikilinks=args.wikilinks,
         encode_urls=args.encode_urls,
     )
```

### What this does

* Scans the **current board** for each `## <Header>` line and maps it to its status (using your existing `_status_tag_from_header`).
* When rebuilding, it **reuses the original header text** (including ` (N)` WIP limits, emojis, custom casing), instead of synthesizing a fresh title.
* If a header didn’t exist before, it falls back to the normalized `Title Case` (same as today).

### How to use

* Dry run:

  ```bash
  python3 hashtags_to_kanban.py --wikilinks | less
  ```
* Validate:

  ```bash
  python3 hashtags_to_kanban.py --check
  ```
* Write atomically:

  ```bash
  python3 hashtags_to_kanban.py --wikilinks --write
  ```

If you also want this script to adopt the **case-insensitive tag parsing** fix (so `#Accepted` etc. are normalized here too), say the word and I’ll layer in that tiny normalization helper—kept separate to avoid surprises.
