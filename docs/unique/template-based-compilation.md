---
uuid: f8877e5e-1e4f-4478-93cd-a0bf86d26a41
created_at: template-based-compilation.md
filename: template-based-compilation
description: >-
  Explains how Sibilant's template-based compilation works by composing code as
  strings with Lisp macros, enabling custom compiler generation without AST
  interpretation.
tags:
  - sibilant
  - template-compilation
  - lisp
  - macros
  - codegen
  - string-templating
  - metaprogramming
  - async-await
  - syntax-extension
  - transpiler
related_to_title:
  - aionian-circuit-math
  - sibilant-metacompiler-overview
  - Cross-Target Macro System in Sibilant
  - polymorphic-meta-programming-engine
  - sibilant-macro-targets
  - field-interaction-equations
  - polyglot-repl-interface-layer
  - Chroma Toolkit Consolidation Plan
  - compiler-kit-foundations
  - Cross-Language Runtime Polymorphism
  - sibilant-meta-string-templating-runtime
  - Lispy Macros with syntax-rules
  - lisp-dsl-for-window-management
  - Sibilant Meta-Prompt DSL
  - Promethean-native config design
  - Dynamic Context Model for Web Components
  - ts-to-lisp-transpiler
  - 'Polyglot S-expr Bridge: Python-JS-Lisp Interop'
  - Unique Info Dump Index
  - typed-struct-compiler
  - Lisp-Compiler-Integration
  - prompt-programming-language-lisp
  - js-to-lisp-reverse-compiler
  - 'Agent Tasks: Persistence Migration to DualStore'
  - Interop and Source Maps
  - Board Walk ‚Äì 2025-08-11
  - DSL
  - komorebi-group-window-hack
  - api-gateway-versioning
  - ecs-offload-workers
  - ecs-scheduler-and-prefabs
  - archetype-ecs
  - Diagrams
  - Voice Access Layer Design
  - graph-ds
  - EidolonField
  - Recursive Prompt Construction Engine
  - Math Fundamentals
  - eidolon-field-math-foundations
  - field-dynamics-math-blocks
  - ParticleSimulationWithCanvasAndFFmpeg
  - Language-Agnostic Mirror System
  - JavaScript
  - mystery-lisp-search-session
  - heartbeat-simulation-snippets
  - Obsidian ChatGPT Plugin Integration Guide
  - Obsidian ChatGPT Plugin Integration
  - Prompt_Folder_Bootstrap
  - set-assignment-in-lisp-ast
  - homeostasis-decay-formulas
related_to_uuid:
  - f2d83a77-7f86-4c56-8538-1350167a0c6c
  - 61d4086b-4adf-4e94-95e4-95a249cd1b53
  - 5f210ca2-54e9-445b-afe4-fb340d4992c5
  - 7bed0b9a-8b22-4b1f-be81-054a179453cb
  - c5c9a5c6-427d-4864-8084-c083cd55faa0
  - b09141b7-544f-4c8e-8f49-bf76cecaacbb
  - 9c79206d-4cb9-4f00-87e0-782dcea37bc7
  - 5020e892-8f18-443a-b707-6d0f3efcfe22
  - 01b21543-7e03-4129-8fe4-b6306be69dee
  - c34c36a6-80c9-4b44-a200-6448543b1b33
  - 2aafc801-c3e1-4e4f-999d-adb52af3fc41
  - cbfe3513-6a4a-4d2e-915d-ddfab583b2de
  - c5c5ff1c-d1bc-45c7-8a84-55a4a847dfc5
  - af5d2824-faad-476c-a389-e912d9bc672c
  - ab748541-020e-4a7e-b07d-28173bd5bea2
  - f7702bf8-f7db-473c-9a5b-8dbf66ad3b9e
  - ba11486b-b0b0-4d9d-a0d1-1d91ae34de55
  - 63a1cc28-b85c-4ce2-b754-01c2bc0c0bc3
  - 30ec3ba6-fbca-4606-ac3e-89b747fbeb7c
  - 78eeedf7-75bc-4692-a5a7-bb6857270621
  - cfee6d36-b9f5-4587-885a-cdfddb4f054e
  - d41a06d1-613e-4440-80b7-4553fc694285
  - 58191024-d04a-4520-8aae-a18be7b94263
  - 93d2ba51-8689-49ee-94e2-296092e48058
  - cdfac40c-00e4-458f-96a7-4c37d0278731
  - 7aa1eb92-7f9a-485b-8218-9b553aa9eefc
  - e87bc036-1570-419e-a558-f45b9c0db698
  - dd89372d-10de-42a9-8c96-6bc13ea36d02
  - 0580dcd3-533d-4834-8a2f-eae3771960a9
  - 6498b9d7-bd35-4bd3-89fb-af1c415c3cd1
  - c62a1815-c43b-4a3b-88e6-d7fa008a155e
  - 8f4c1e86-1236-4936-84ca-6ed7082af6b7
  - 45cd25b5-ed36-49ab-82c8-10d0903e34db
  - 543ed9b3-b7af-4ce1-b455-f7ba71a0bbc8
  - 6620e2f2-de6d-45d8-a722-5d26e160b370
  - 49d1e1e5-5d13-4955-8f6f-7676434ec462
  - babdb9eb-3b15-48a7-8a22-ecc53af7d397
  - c6e87433-ec5d-4ded-bb1a-fb8734a3cfd9
  - 008f2ac0-bfaa-4d52-9826-2d5e86c0059f
  - 7cfc230d-8ec2-4cdb-b931-8aec26de2a00
  - e018dd7a-1fb7-4732-9e67-cd8b2f0831cf
  - d2b3628c-6cad-4664-8551-94ef8280851d
  - c1618c66-f73a-4e04-9bfa-ef38755f7acc
  - 513dc4c7-e045-4123-ba2e-cf5ef0b7b4a3
  - 23e221e9-d4fa-4106-8458-06db2595085f
  - 1d3d6c3a-039e-4b96-93c1-95854945e248
  - ca8e1399-77bf-4f77-82a3-3f703b68706d
  - bd4f0976-0d5b-47f6-a20a-0601d1842dc1
  - c5fba0a0-9196-468d-a0f3-51c99e987263
  - 37b5d236-2b3e-4a95-a4e8-31655c3023ef
references: []
---
Note: Consolidated here ‚Üí ../notes/dsl/template-based-compilation.md

**YES. That's the good shit.**

That right there is **template-as-compilation**, raw and powerful. You're not building ASTs that are interpreted ‚Äî you're literally **composing code as strings**, with Lisp macros giving you the syntax abstraction **and** codegen at the same time.

You‚Äôre not stuck with AST rules ‚Äî you‚Äôre writing a **custom compiler** for every macro.

---

## üß† Why This Is a Game Changer

In Common Lisp or Hy, macros return **quoted code** to be executed in a fixed runtime.

But in Sibilant, macros return:

* Raw strings
* Lists of strings
* Nested arrays that **flatten into formatted code**

Which means:

* You don‚Äôt need to wait for someone to add a feature to the host language
* You don‚Äôt even need to *target* the host language
* You can use macros as **code weaving machines**

You‚Äôre not *interpreting Lisp* ‚Äî you‚Äôre using Lisp to **write other languages**.

---

## üß∞ Example Expansion

Your macro:

```sibilant
(def-async do-thing (x y)
  (var result (await (call-api x y)))
  (print result))
```

Expands to:

```js
async function doThing(x, y) {
  var result = await callApi(x, y);
  console.log(result);
}
```

Clean, readable, maintainable ‚Äî and **it was all Lisp** at authoring time.

---

## üîß Sibilant Meta-Compilation Stack

You could build:

1. **Language targets** (JS, TS, Py, Cython, etc.)
2. A **macro prelude** per language
3. A **compiler pass** that loads all macros, sets output mode, and generates code

---

## üß¨ New Meta-Features You Could Add

| Feature             | Macro Shape Example                       |
| ------------------- | ----------------------------------------- |
| Target annotation   | `(target js)` / `(target py)`             |
| Namespaced imports  | `(import lodash :as _)`                   |
| Pattern matching    | `(match val (case 1 ...))`                |
| JSX-style macro DSL | `(html (div "hello"))`                    |
| Type decorators     | `(defn greet (name :string) ...)`         |
| Inline docgen       | `(doc "adds two numbers") (defn add ...)` |

---

## üöÄ Want to Take This Further?

We could scaffold:

* A **dual-target DSL** in Sibilant ‚Üí `js/` and `py/` outputs
* A **macro system** that compiles window layout commands (e.g., your i3 DSL)
* A **Sibilant loader** that reads macros and emits multi-language bindings
* A **Lisp shell** that lets you live-edit and run Sibilant macros on the fly

---

## üè∑Ô∏è Tags

\#sibilant #dsl #metaprogramming #codegen #stringtemplating #macros #lisp #transpiler #asyncawait #syntaxextension

---

Let‚Äôs do something wild. Want to define the first `defbind` macro for your tiling WM DSL in Sibilant now? Or build a `target` system so the same macro can compile to Python or JS?<!-- GENERATED-SECTIONS:DO-NOT-EDIT-BELOW -->
## Related content
- [aionian-circuit-math](aionian-circuit-math.md)
- [sibilant-metacompiler-overview](sibilant-metacompiler-overview.md)
- [Cross-Target Macro System in Sibilant](cross-target-macro-system-in-sibilant.md)
- [polymorphic-meta-programming-engine](polymorphic-meta-programming-engine.md)
- [sibilant-macro-targets](sibilant-macro-targets.md)
- [field-interaction-equations](field-interaction-equations.md)
- [polyglot-repl-interface-layer](polyglot-repl-interface-layer.md)
- [Chroma Toolkit Consolidation Plan](chroma-toolkit-consolidation-plan.md)
- [compiler-kit-foundations](compiler-kit-foundations.md)
- [Cross-Language Runtime Polymorphism](cross-language-runtime-polymorphism.md)
- [sibilant-meta-string-templating-runtime](sibilant-meta-string-templating-runtime.md)
- [Lispy Macros with syntax-rules](lispy-macros-with-syntax-rules.md)
- [lisp-dsl-for-window-management](lisp-dsl-for-window-management.md)
- [Sibilant Meta-Prompt DSL](sibilant-meta-prompt-dsl.md)
- [Promethean-native config design](promethean-native-config-design.md)
- [Dynamic Context Model for Web Components](dynamic-context-model-for-web-components.md)
- [ts-to-lisp-transpiler](ts-to-lisp-transpiler.md)
- [Polyglot S-expr Bridge: Python-JS-Lisp Interop](polyglot-s-expr-bridge-python-js-lisp-interop.md)
- [Unique Info Dump Index](unique-info-dump-index.md)
- [typed-struct-compiler](typed-struct-compiler.md)
- [Lisp-Compiler-Integration](lisp-compiler-integration.md)
- [prompt-programming-language-lisp](prompt-programming-language-lisp.md)
- [js-to-lisp-reverse-compiler](js-to-lisp-reverse-compiler.md)
- [Agent Tasks: Persistence Migration to DualStore](agent-tasks-persistence-migration-to-dualstore.md)
- [Interop and Source Maps](interop-and-source-maps.md)
- [Board Walk ‚Äì 2025-08-11](board-walk-2025-08-11.md)
- [DSL](chunks/dsl.md)
- [komorebi-group-window-hack](komorebi-group-window-hack.md)
- [api-gateway-versioning](api-gateway-versioning.md)
- [ecs-offload-workers](ecs-offload-workers.md)
- [ecs-scheduler-and-prefabs](ecs-scheduler-and-prefabs.md)
- [archetype-ecs](archetype-ecs.md)
- [Diagrams](chunks/diagrams.md)
- [Voice Access Layer Design](voice-access-layer-design.md)
- [graph-ds](graph-ds.md)
- [EidolonField](eidolonfield.md)
- [Recursive Prompt Construction Engine](recursive-prompt-construction-engine.md)
- [Math Fundamentals](chunks/math-fundamentals.md)
- [eidolon-field-math-foundations](eidolon-field-math-foundations.md)
- [field-dynamics-math-blocks](field-dynamics-math-blocks.md)
- [ParticleSimulationWithCanvasAndFFmpeg](particlesimulationwithcanvasandffmpeg.md)
- [Language-Agnostic Mirror System](language-agnostic-mirror-system.md)
- [JavaScript](chunks/javascript.md)
- [mystery-lisp-search-session](mystery-lisp-search-session.md)
- [heartbeat-simulation-snippets](heartbeat-simulation-snippets.md)
- [Obsidian ChatGPT Plugin Integration Guide](obsidian-chatgpt-plugin-integration-guide.md)
- [Obsidian ChatGPT Plugin Integration](obsidian-chatgpt-plugin-integration.md)
- [Prompt_Folder_Bootstrap](prompt-folder-bootstrap.md)
- [set-assignment-in-lisp-ast](set-assignment-in-lisp-ast.md)
- [homeostasis-decay-formulas](homeostasis-decay-formulas.md)
## Sources
- _None_
<!-- GENERATED-SECTIONS:DO-NOT-EDIT-ABOVE -->
