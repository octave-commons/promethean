---
uuid: 8dbe24fe-8fe5-41ef-a20b-feeb647a85d9
created_at: markdown-to-org-transpiler.md
filename: markdown-to-org-transpiler
title: markdown-to-org-transpiler
description: >-
  A zero-dependency transpiler that converts Markdown to Org-mode format,
  supporting common Markdown features like headings, lists, blockquotes, code
  fences, and tables. Works in both Node.js and browsers with minimal
  configuration.
tags:
  - markdown
  - org-mode
  - transpiler
  - zero-deps
  - browser
  - node
  - commonmark
related_to_uuid:
  - 2792d448-c3b5-4050-93dd-93768529d99c
  - 1f32c94a-4da4-4266-8ac0-6c282cfb401f
  - 22b989d5-f4aa-4880-8632-709c21830f83
  - e9b27b06-f608-4734-ae6c-f03a8b1fcf5f
  - fc21f824-4244-4030-a48e-c4170160ea1d
  - a4a25141-6380-40b9-9cd7-b554b246b303
  - 6620e2f2-de6d-45d8-a722-5d26e160b370
  - dd00677a-2280-45a7-91af-0728b21af3ad
  - 5e408692-0e74-400e-a617-84247c7353ad
  - 291c7d91-da8c-486c-9bc0-bd2254536e2d
  - dd89372d-10de-42a9-8c96-6bc13ea36d02
  - 64a9f9f9-58ee-4996-bdaf-9373845c6b29
  - 78eeedf7-75bc-4692-a5a7-bb6857270621
  - ed6f3fc9-5eb1-482c-8b3c-f0abc5aff2a2
  - 30ec3ba6-fbca-4606-ac3e-89b747fbeb7c
  - 62bec6f0-4e13-4f38-aca4-72c84ba02367
  - 1b1338fc-bb4d-41df-828f-e219cc9442eb
  - 10d98225-12e0-4212-8e15-88b57cf7bee5
  - 13951643-1741-46bb-89dc-1beebb122633
  - 008f2ac0-bfaa-4d52-9826-2d5e86c0059f
  - c5c5ff1c-d1bc-45c7-8a84-55a4a847dfc5
  - af5d2824-faad-476c-a389-e912d9bc672c
  - c5fba0a0-9196-468d-a0f3-51c99e987263
  - 36c8882a-badc-4e18-838d-2c54d7038141
  - 5f210ca2-54e9-445b-afe4-fb340d4992c5
related_to_title:
  - Docops Feature Updates
  - field-node-diagram-outline
  - field-node-diagram-set
  - field-node-diagram-visualizations
  - Fnord Tracer Protocol
  - Functional Embedding Pipeline Refactor
  - graph-ds
  - heartbeat-fragment-demo
  - i3-bluetooth-setup
  - Ice Box Reorganization
  - komorebi-group-window-hack
  - Layer1SurvivabilityEnvelope
  - typed-struct-compiler
  - Unique Concepts
  - Unique Info Dump Index
  - zero-copy-snapshots-and-workers
  - Canonical Org-Babel Matplotlib Animation Template
  - Creative Moments
  - Duck's Attractor States
  - eidolon-field-math-foundations
  - lisp-dsl-for-window-management
  - Sibilant Meta-Prompt DSL
  - set-assignment-in-lisp-ast
  - shared-package-layout-clarification
  - Cross-Target Macro System in Sibilant
references:
  - uuid: 78eeedf7-75bc-4692-a5a7-bb6857270621
    line: 1016
    col: 0
    score: 1
  - uuid: ed6f3fc9-5eb1-482c-8b3c-f0abc5aff2a2
    line: 175
    col: 0
    score: 1
  - uuid: 30ec3ba6-fbca-4606-ac3e-89b747fbeb7c
    line: 1221
    col: 0
    score: 1
  - uuid: 62bec6f0-4e13-4f38-aca4-72c84ba02367
    line: 1058
    col: 0
    score: 1
  - uuid: 1b1338fc-bb4d-41df-828f-e219cc9442eb
    line: 515
    col: 0
    score: 1
  - uuid: 10d98225-12e0-4212-8e15-88b57cf7bee5
    line: 251
    col: 0
    score: 1
  - uuid: 13951643-1741-46bb-89dc-1beebb122633
    line: 559
    col: 0
    score: 1
  - uuid: 008f2ac0-bfaa-4d52-9826-2d5e86c0059f
    line: 1033
    col: 0
    score: 1
  - uuid: 2792d448-c3b5-4050-93dd-93768529d99c
    line: 226
    col: 0
    score: 1
  - uuid: 1f32c94a-4da4-4266-8ac0-6c282cfb401f
    line: 705
    col: 0
    score: 1
  - uuid: 22b989d5-f4aa-4880-8632-709c21830f83
    line: 719
    col: 0
    score: 1
  - uuid: e9b27b06-f608-4734-ae6c-f03a8b1fcf5f
    line: 601
    col: 0
    score: 1
  - uuid: fc21f824-4244-4030-a48e-c4170160ea1d
    line: 1060
    col: 0
    score: 1
  - uuid: a4a25141-6380-40b9-9cd7-b554b246b303
    line: 726
    col: 0
    score: 1
  - uuid: 6620e2f2-de6d-45d8-a722-5d26e160b370
    line: 996
    col: 0
    score: 1
  - uuid: dd00677a-2280-45a7-91af-0728b21af3ad
    line: 667
    col: 0
    score: 1
  - uuid: 5e408692-0e74-400e-a617-84247c7353ad
    line: 736
    col: 0
    score: 1
  - uuid: 291c7d91-da8c-486c-9bc0-bd2254536e2d
    line: 645
    col: 0
    score: 1
  - uuid: dd89372d-10de-42a9-8c96-6bc13ea36d02
    line: 739
    col: 0
    score: 1
  - uuid: 64a9f9f9-58ee-4996-bdaf-9373845c6b29
    line: 816
    col: 0
    score: 1
  - uuid: c5c5ff1c-d1bc-45c7-8a84-55a4a847dfc5
    line: 185
    col: 0
    score: 0.93
  - uuid: af5d2824-faad-476c-a389-e912d9bc672c
    line: 120
    col: 0
    score: 0.92
  - uuid: c5fba0a0-9196-468d-a0f3-51c99e987263
    line: 148
    col: 0
    score: 0.91
  - uuid: 36c8882a-badc-4e18-838d-2c54d7038141
    line: 161
    col: 0
    score: 0.91
  - uuid: b362e12e-2802-4e41-9a21-6e0c7ad419a2
    line: 151
    col: 0
    score: 0.91
  - uuid: 5f210ca2-54e9-445b-afe4-fb340d4992c5
    line: 148
    col: 0
    score: 0.89
  - uuid: 9a8ab57e-507c-4c6b-aab4-01cea1bc0501
    line: 147
    col: 0
    score: 0.89
  - uuid: 01b21543-7e03-4129-8fe4-b6306be69dee
    line: 588
    col: 0
    score: 0.89
  - uuid: c710dc93-9fec-471b-bdee-bedbd360c67f
    line: 150
    col: 0
    score: 0.89
  - uuid: cbfe3513-6a4a-4d2e-915d-ddfab583b2de
    line: 375
    col: 0
    score: 0.89
  - uuid: 6498b9d7-bd35-4bd3-89fb-af1c415c3cd1
    line: 427
    col: 0
    score: 0.89
  - uuid: ba244286-4e84-425b-8bf6-b80c4eb783fc
    line: 374
    col: 0
    score: 0.89
  - uuid: 7bed0b9a-8b22-4b1f-be81-054a179453cb
    line: 190
    col: 0
    score: 0.88
  - uuid: c34c36a6-80c9-4b44-a200-6448543b1b33
    line: 211
    col: 0
    score: 0.88
  - uuid: 871490c7-a050-429b-88b2-55dfeaa1f8d5
    line: 105
    col: 0
    score: 0.88
  - uuid: 2c00ce45-08cf-4b81-9883-6157f30b7fae
    line: 279
    col: 0
    score: 0.88
  - uuid: cfee6d36-b9f5-4587-885a-cdfddb4f054e
    line: 523
    col: 0
    score: 0.88
  - uuid: d2b3628c-6cad-4664-8551-94ef8280851d
    line: 504
    col: 0
    score: 0.86
  - uuid: 58191024-d04a-4520-8aae-a18be7b94263
    line: 343
    col: 0
    score: 0.86
  - uuid: 63a1cc28-b85c-4ce2-b754-01c2bc0c0bc3
    line: 491
    col: 0
    score: 0.86
  - uuid: 9413237f-2537-4bbf-8768-db6180970e36
    line: 44
    col: 0
    score: 0.85
  - uuid: 3a3bf2c9-c0f6-4d7b-bf84-c83c70dece3f
    line: 213
    col: 0
    score: 0.85
  - uuid: c0392040-16a2-41e8-bd54-75110319e3c0
    line: 37
    col: 0
    score: 0.85
  - uuid: 0b872af2-4197-46f3-b631-afb4e6135585
    line: 22
    col: 0
    score: 0.85
  - uuid: 2d6e5553-8dc4-497f-bf45-96f8ca00a6f6
    line: 70
    col: 0
    score: 0.85
  - uuid: 6deed6ac-2473-40e0-bee0-ac9ae4c7bff2
    line: 716
    col: 0
    score: 0.85
  - uuid: 1c4046b5-742d-4004-aec6-b47251fef5d6
    line: 24
    col: 0
    score: 0.85
  - uuid: 8b8e6103-30a4-4d66-b5f2-87db1612b587
    line: 137
    col: 0
    score: 0.85
  - uuid: 95205cd3-c3d5-4047-9c33-9c5ca2b49597
    line: 67
    col: 0
    score: 0.85
  - uuid: 23df6ddb-05cf-4639-8201-f8291f8a6026
    line: 83
    col: 0
    score: 0.85
  - uuid: c62a1815-c43b-4a3b-88e6-d7fa008a155e
    line: 376
    col: 0
    score: 0.85
  - uuid: d28090ac-f746-4958-aab5-ed1315382c04
    line: 28
    col: 0
    score: 0.85
  - uuid: 45cd25b5-ed36-49ab-82c8-10d0903e34db
    line: 43
    col: 0
    score: 0.85
  - uuid: f1add613-656e-4bec-b52b-193fd78c4642
    line: 109
    col: 0
    score: 0.85
  - uuid: 13951643-1741-46bb-89dc-1beebb122633
    line: 94
    col: 0
    score: 0.85
  - uuid: 71726f04-eb1c-42a5-a5fe-d8209de6e159
    line: 53
    col: 0
    score: 0.85
  - uuid: f7702bf8-f7db-473c-9a5b-8dbf66ad3b9e
    line: 424
    col: 0
    score: 0.85
  - uuid: 5e8b2388-022b-46cf-952c-36ae9b8f0037
    line: 209
    col: 0
    score: 0.85
  - uuid: 008f2ac0-bfaa-4d52-9826-2d5e86c0059f
    line: 142
    col: 0
    score: 0.85
  - uuid: 938eca9c-97e2-4bcc-8653-b0ef1a5ac7a3
    line: 39
    col: 0
    score: 0.85
  - uuid: c03020e1-e3e7-48bf-aa7e-aa740c601b63
    line: 547
    col: 0
    score: 0.85
  - uuid: 9413237f-2537-4bbf-8768-db6180970e36
    line: 98
    col: 0
    score: 0.85
  - uuid: 3a3bf2c9-c0f6-4d7b-bf84-c83c70dece3f
    line: 162
    col: 0
    score: 0.85
---
Heck yeah—**Markdown → Org-mode** transpiler, zero deps, Node + browser safe. Handles the 90%: headings (ATX/Setext), lists (bulleted/ordered, nested, checkboxes), blockquotes, code fences, inline code, emphasis, strike, links/images, horizontal rules, and pipe tables. ^ref-ab54cdd8-1-0

Drop this in: ^ref-ab54cdd8-3-0

# `shared/js/prom-lib/text/md2org.ts`

````ts
// MIT. Zero deps. Node + browser.
// Markdown → Org-mode (CommonMark-ish subset).
// Handles: #/##/..., Setext headings, lists (nested, tasks), blockquotes,
// fences ```lang, inline code, **bold**/*italic*/~~strike~~, links/images,
// HR, and pipe tables.
//
// Usage:
//   import { mdToOrg } from "./md2org";
//   const org = mdToOrg(markdown, { hardWrap:false });

export interface Md2OrgOptions {
  hardWrap?: boolean;       // if true, preserve <br> line breaks inside paragraphs
}

export function mdToOrg(md: string, opts: Md2OrgOptions = {}): string {
  const lines = md.replace(/\r\n?/g, "\n").split("\n");
  const out: string[] = [];
  let i = 0;

  let inFence = false;
  let fenceLang = "";
  let inQuote = false;
  let inTable = false;
  let pendingSetext: { lineIdx: number; level: number } | null = null;

  // list stack: tracks indent -> marker
  const listStack: { indent: number; ordered: boolean }[] = [];

  const flushList = () => { listStack.length = 0; };
  const endQuote = () => { if (inQuote) { out.push("#+end_quote"); inQuote = false; } };
  const endFence = () => { if (inFence) { out.push("#+end_src"); inFence = false; fenceLang = ""; } };
  const endTable = () => { if (inTable) { inTable = false; } };

  while (i < lines.length) {
    let line = lines[i];

    // ---- Code fences ----
    const fenceMatch = line.match(/^(\s*)(`{3,}|~{3,})(\s*)(\S+)?\s*$/);
    if (fenceMatch) {
      endQuote(); endTable(); // no nesting
      if (!inFence) {
        inFence = true; fenceLang = (fenceMatch[4] || "").trim();
        out.push(`#+begin_src ${fenceLang}`.trim());
      } else {
        endFence();
      }
      i++; continue;
    }
    if (inFence) { out.push(line); i++; continue; }

    // ---- Horizontal rule ----
    if (/^\s*((\*\s*){3,}|(-\s*){3,}|(_\s*){3,})\s*$/.test(line)) {
      endQuote(); endTable(); flushList();
      out.push("-----"); i++; continue;
    }

    // ---- Setext heading lookahead ----
    if (!pendingSetext && i + 1 < lines.length) {
      const nxt = lines[i + 1];
      if (/^\s*===+\s*$/.test(nxt)) pendingSetext = { lineIdx: i, level: 1 };
      else if (/^\s*---+\s*$/.test(nxt)) pendingSetext = { lineIdx: i, level: 2 };
    }
    if (pendingSetext && pendingSetext.lineIdx === i) {
      endQuote(); endTable(); flushList();
      const text = inline(lines[i].trim(), opts);
      out.push(`${"*".repeat(pendingSetext.level)} ${text}`);
      i += 2; pendingSetext = null; continue;
    }

    // ---- ATX heading ----
    const atx = line.match(/^\s{0,3}(#{1,6})\s+(.+?)\s*#*\s*$/);
    if (atx) {
      endQuote(); endTable(); flushList();
      const level = Math.min(6, atx[1].length);
      out.push(`${"*".repeat(level)} ${inline(atx[2], opts)}`);
      i++; continue;
    }

    // ---- Blockquote (group contiguous) ----
    if (/^\s{0,3}>\s?/.test(line)) {
      if (!inQuote) { endTable(); out.push("#+begin_quote"); inQuote = true; }
      // Strip leading '>' (allow nested '>>')
      line = line.replace(/^\s{0,3}>\s?/, "");
      out.push(inline(line, opts));
      i++; 
      // keep consuming quote lines; loop naturally handles
      continue;
    } else {
      endQuote();
    }

    // ---- Tables (pipe) ----
    if (/^\s*\|.*\|\s*$/.test(line)) {
      endQuote(); flushList();
      inTable = true;
      // Header separator in MD: |---|---|  → Org hline: |---+---|
      if (/^\s*\|?\s*:?-{3,}.*\|\s*$/.test(line)) {
        const cols = countColumns(lines[i - 1] || line);
        out.push(makeOrgHline(cols));
      } else {
        out.push(normalizeTableRow(line));
      }
      i++; 
      // close table when next line isn't a table row
      if (i < lines.length && !/^\s*\|.*\|\s*$/.test(lines[i])) endTable();
      continue;
    } else {
      endTable();
    }

    // ---- Lists (bulleted / ordered / task) ----
    const list = line.match(/^(\s*)([*+\-]|\d+[.)])\s+(.*)$/);
    if (list) {
      const indent = list[1].replace(/\t/g, "    ").length;
      const marker = list[2];
      const text = list[3];

      // adjust stack
      while (listStack.length && indent < listStack[listStack.length - 1].indent) listStack.pop();
      if (!listStack.length || indent > listStack[listStack.length - 1].indent) {
        listStack.push({ indent, ordered: /^\d/.test(marker) });
      }

      const top = listStack[listStack.length - 1];
      const orgMarker = top.ordered ? "1." : "-";

      // task?
      const task = text.match(/^\[( |x|X)\]\s+(.*)$/);
      const body = task ? `[${task[1].toUpperCase()}] ${inline(task[2], opts)}` : inline(text, opts);

      out.push(`${" ".repeat(top.indent)}${orgMarker} ${body}`);
      i++; continue;
    } else {
      // leaving list context on blank or non-list
      if (/^\s*$/.test(line)) flushList();
    }

    // ---- Blank line ----
    if (/^\s*$/.test(line)) { out.push(""); i++; continue; }

    // ---- Paragraph (with hardWrap option for <br>) ----
    out.push(inline(line, opts));
    i++;
  }

  // close any open blocks
  endFence(); endQuote(); endTable(); flushList();

  return out.join("\n");
}

// ---------- helpers ----------

function inline(s: string, opts: Md2OrgOptions): string {
  if (s === "") return s;

  // protect code spans with sentinels
  const codes: string[] = [];
  s = s.replace(/`([^`]+)`/g, (_m, g1) => {
    codes.push(g1);
    return `\u0001${codes.length - 1}\u0001`;
  });

  // images !alt
  s = s.replace(/!\[([^\]]*)\]\((\S+?)(?:\s+"[^"]*")?\)/g, (_m, alt, url) => `[[${url}][${alt}]]`);
  // links text
  s = s.replace(/\[([^\]]+)\]\((\S+?)\)/g, (_m, txt, url) => `[[${url}][${txt}]]`);
  // autolinks 
  s = s.replace(/<((?:https?|mailto):[^>]+)>/g, (_m, url) => `[[${url}]]`);

  // strikethrough ~~text~~ → +text+
  s = s.replace(/~~([^~]+)~~/g, (_m, g1) => `+${g1}+`);

  // bold **text** or __text__ → *text*
  s = s.replace(/\*\*([^\n*][\s\S]*?)\*\*/g, (_m, g1) => `*${g1}*`);
  s = s.replace(/__([^\n_][\s\S]*?)__/g, (_m, g1) => `*${g1}*`);

  // italics *text* or _text_ → /text/
  // try to avoid clobbering bold we just produced: use negative lookarounds
  s = s.replace(/(^|[^*])\*([^\s*][\s\S]*?)\*(?!\*)/g, (_m, pre, g1) => `${pre}/${g1}/`);
  s = s.replace(/(^|[^_])_([^\s_][\s\S]*?)_(?!_)/g, (_m, pre, g1) => `${pre}/${g1}/`);

  // line breaks
  if (!opts.hardWrap) {
    // collapse trailing two-spaces line break → Org needs explicit \\ or keep as is
    s = s.replace(/ {2,}\n/g, "\\\\\n");
  }

  // restore code spans as ~code~
  s = s.replace(/\u0001(\d+)\u0001/g, (_m, idx) => `~${codes[Number(idx)]}~`);

  return s;
}

function countColumns(row: string): number {
  const cells = row.trim().replace(/^\|/, "").replace(/\|$/, "").split("|");
  return cells.length;
}
function makeOrgHline(cols: number): string {
  return "|" + Array.from({ length: cols }, () => "---").join("+") + "|";
}
function normalizeTableRow(line: string): string {
  // Ensure leading & trailing pipe, trim cells
  const trimmed = line.trim();
  const inner = trimmed.replace(/^\|/, "").replace(/\|$/, "").split("|").map(c => " " + c.trim() + " ").join("|");
  return "|" + inner + "|";
}
````
^ref-ab54cdd8-7-0 ^ref-ab54cdd8-216-0

## Tiny examples
 ^ref-ab54cdd8-219-0
```ts
const md = `
# Title

A *para* with **bold**, _italics_, ~~strike~~, \`code\`, a link, and !img.

> quoted
> block

- [x] done
  - [ ] nested
1. item
2. item

\`\`\`ts
console.log("hi")
\`\`\`

| a | b |
|---|---|
| 1 | 2 |
`;

console.log(mdToOrg(md));
^ref-ab54cdd8-219-0
``` ^ref-ab54cdd8-245-0

**Output (vibes):** ^ref-ab54cdd8-247-0

```
* Title

A /para/ with *bold*, /italics/, +strike+, ~code~, a [[ and [[file.png][img]].

#+begin_quote
quoted
block
#+end_quote

- [X] done
  - [ ] nested
1. item
2. item

#+begin_src ts
console.log("hi")
#+end_src

| a | b |
|---+---|
^ref-ab54cdd8-247-0
| 1 | 2 |
```
^ref-ab54cdd8-272-0
 ^ref-ab54cdd8-273-0
## Bonus: CLI (Node)

```ts
// tools/md2org.mjs
import fs from "node:fs/promises";
import { mdToOrg } from "../shared/js/prom-lib/text/md2org.js";

const input = process.argv[2];
if (!input) { console.error("usage: node tools/md2org.mjs <file.md>"); process.exit(1); }
const md = await fs.readFile(input, "utf8");
const org = mdToOrg(md);
const out = input.replace(/\.md$/i, ".org");
^ref-ab54cdd8-273-0
await fs.writeFile(out, org, "utf8");
console.log(`Wrote ${out}`);
``` ^ref-ab54cdd8-289-0
 ^ref-ab54cdd8-291-0
--- ^ref-ab54cdd8-291-0
 ^ref-ab54cdd8-292-0 ^ref-ab54cdd8-293-0
If you want, I can add: ^ref-ab54cdd8-293-0
 ^ref-ab54cdd8-294-0
* **Footnotes** (`[^id]` → `[fn:id]`) and references,
* **Definition lists** and **task list → TODO/DONE** mapping, ^ref-ab54cdd8-297-0
* **TOC** (`[[toc]]` → `#+toc`), ^ref-ab54cdd8-297-0
* or a **remark/unified** adapter so you can swap in a full Markdown AST for perfect fidelity when you *do* want deps.
