To serve static files in Fastify, you can use the `@fastify/static` plugin. Here's how to set it up:([npm][1])

### Installation

First, install the plugin:

```bash
npm install @fastify/static
```



### Basic Usage

Here's a simple example of how to serve static files from a directory named `public`:

```javascript
import Fastify from 'fastify';
import path from 'path';
import fastifyStatic from '@fastify/static';

const fastify = Fastify({ logger: true });

fastify.register(fastifyStatic, {
  root: path.join(__dirname, 'public'),
  prefix: '/public/', // optional: default '/'
});

fastify.listen({ port: 3000 }, (err, address) => {
  if (err) throw err;
  console.log(`Server listening at ${address}`);
});
```



In this setup, any files in the `public` directory can be accessed via URLs starting with `/public/`. For example, `public/index.html` would be available at `http://localhost:3000/public/index.html`.([wiblok.com][2])

### Serving Specific Files

If you want to serve specific files, such as `index.html` at the root URL, you can use the `reply.sendFile` method:([GitHub][3])

```javascript
fastify.get('/', (request, reply) => {
  return reply.sendFile('index.html'); // serving path.join(__dirname, 'public', 'index.html')
});
```



This method uses the `root` directory specified during plugin registration to locate the file.([Reddit][4])

### Advanced Configuration

The `@fastify/static` plugin offers several options for advanced configurations:([npm][1])

* **Multiple Directories**: You can serve multiple directories under different prefixes.([npm][1])

```javascript
  fastify.register(fastifyStatic, {
    root: path.join(__dirname, 'public'),
    prefix: '/public/',
  });

  fastify.register(fastifyStatic, {
    root: path.join(__dirname, 'assets'),
    prefix: '/assets/',
    decorateReply: false, // prevent overriding the previous reply.sendFile
  });
```



* **Caching**: Control caching behavior with options like `maxAge` and `immutable`.([GitHub][3])

```javascript
  fastify.register(fastifyStatic, {
    root: path.join(__dirname, 'public'),
    maxAge: '1d',
    immutable: true,
  });
```



* **Custom Headers**: Set custom headers for responses.([GitHub][3])

```javascript
  fastify.register(fastifyStatic, {
    root: path.join(__dirname, 'public'),
    setHeaders: (res, pathName) => {
      res.setHeader('X-Custom-Header', 'value');
    },
  });
```



For more detailed information and additional options, refer to the official documentation: ([GitHub][3])

If you have specific requirements or need further assistance with configuring static file serving in Fastify, feel free to ask!

[1]: https://www.npmjs.com/package/%40fastify/static/v/8.0.4?utm_source=chatgpt.com "fastify/static"
[2]: https://wiblok.com/en/nodejs/fastify/fastify-static-file-response-method/?utm_source=chatgpt.com "How to serve static files with Fastify - Wiblok"
[3]: https://github.com/fastify/fastify-static?utm_source=chatgpt.com "fastify/fastify-static: Plugin for serving static files as fast as ..."
[4]: https://www.reddit.com/r/webdev/comments/15tt6rn/serving_static_with_fastify/?utm_source=chatgpt.com "Serving static with fastify : r/webdev"
