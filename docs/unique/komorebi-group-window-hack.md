---
uuid: a23de044-17e0-45f0-bba7-d870803cbfed
created_at: komorebi-group-window-hack.md
filename: Komorebi Group Manager
title: Komorebi Group Manager
description: >-
  A minimal TypeScript service for grouping windows and cycling through them
  using Komorebi's CLI. It watches open windows, assigns to user-defined frames,
  and cycles between members with a single command.
tags:
  - typescript
  - komorebi
  - window management
  - group cycling
  - cli
  - state management
related_to_uuid:
  - 2611e17e-c7dd-4de6-9c66-d98fcfa9ffb5
  - bb4f4ed0-91f3-488a-9d64-3a33bde77e4e
  - 004a0f06-3808-4421-b9e1-41b5b41ebcb8
  - b25be760-256e-4a8a-b34d-867281847ccb
  - 95410f6e-dabb-4560-80a8-1ed4fd9c3d3b
  - 792a343e-674c-4bb4-8435-b3f8c163349d
  - 0c501d52-ba38-42aa-ad25-2d78425dfaff
  - 10780cdc-5036-4e8a-9599-a11703bc30c9
  - 3657117f-241d-4ab9-a717-4a3f584071fc
  - 9a1076d6-1aac-497e-bac3-66c9ea09da55
  - 5becb573-0a78-486b-8d3c-199b3c7a79ec
  - 4d8cbf01-e44a-452f-96a0-17bde7b416a8
  - 7d584c12-7517-4f30-8378-34ac9fc3a3f8
  - 4316c3f9-551f-4872-b5c5-98ae73508535
  - e2955491-020a-4009-b7ed-a5a348c63cfd
  - fd753d3a-84cb-4bdd-ae93-8c5b09617e3b
  - f24dbd59-29e1-4eeb-bb3e-d2c31116b207
  - 2478e18c-f621-4b0c-a4c5-9637d213cccf
  - 740bbd1c-c039-405c-8a32-4baeddfb5637
  - bdca8ded-0e64-417b-a258-4528829c4704
  - 31a2df46-9dbc-4066-b3e3-d3e860099fd0
  - 6bbc5717-b8a5-4aaf-933d-b0225ad598b4
  - 6e678cce-b68f-4420-980f-5c9009f0d971
  - e4317155-7fa6-44e8-8aee-b72384581790
related_to_title:
  - Universal Lisp Interface
  - chroma-embedding-refactor
  - ecs-offload-workers
  - ripple-propagation-demo
  - model-selection-for-lightweight-conversational-tasks
  - windows-tiling-with-autohotkey
  - dynamic-context-model-for-web-components
  - Eidolon Field Abstract Model
  - language-agnostic-mirror-system
  - Stateful Partitions and Rebalancing
  - Agent Reflections and Prompt Evolution
  - pure-node-crawl-stack-with-playwright-and-crawlee
  - promethean-native-config-design
  - WebSocket Gateway Implementation
  - chroma-toolkit-consolidation-plan
  - polyglot-repl-interface-layer
  - Mongo Outbox Implementation
  - Cross-Language Runtime Polymorphism
  - heartbeat-fragment-demo
  - Pure TypeScript Search Microservice
  - field-node-diagram-set
  - matplotlib-animation-with-async-execution
  - balanced-bst
  - TypeScript Patch for Tool Calling Support
references:
  - uuid: bb4f4ed0-91f3-488a-9d64-3a33bde77e4e
    line: 66
    col: 0
    score: 0.88
  - uuid: b25be760-256e-4a8a-b34d-867281847ccb
    line: 16
    col: 0
    score: 0.87
  - uuid: b25be760-256e-4a8a-b34d-867281847ccb
    line: 88
    col: 0
    score: 0.87
  - uuid: 2611e17e-c7dd-4de6-9c66-d98fcfa9ffb5
    line: 137
    col: 0
    score: 0.87
  - uuid: 95410f6e-dabb-4560-80a8-1ed4fd9c3d3b
    line: 103
    col: 0
    score: 0.87
  - uuid: bb4f4ed0-91f3-488a-9d64-3a33bde77e4e
    line: 285
    col: 0
    score: 0.87
  - uuid: 3657117f-241d-4ab9-a717-4a3f584071fc
    line: 37
    col: 0
    score: 0.86
  - uuid: b25be760-256e-4a8a-b34d-867281847ccb
    line: 64
    col: 0
    score: 0.86
  - uuid: 792a343e-674c-4bb4-8435-b3f8c163349d
    line: 104
    col: 0
    score: 0.86
  - uuid: 3657117f-241d-4ab9-a717-4a3f584071fc
    line: 130
    col: 0
    score: 0.86
  - uuid: 95410f6e-dabb-4560-80a8-1ed4fd9c3d3b
    line: 116
    col: 0
    score: 0.86
  - uuid: 5becb573-0a78-486b-8d3c-199b3c7a79ec
    line: 132
    col: 0
    score: 0.86
  - uuid: 2611e17e-c7dd-4de6-9c66-d98fcfa9ffb5
    line: 172
    col: 0
    score: 0.86
  - uuid: 0c501d52-ba38-42aa-ad25-2d78425dfaff
    line: 336
    col: 0
    score: 0.86
  - uuid: 9a1076d6-1aac-497e-bac3-66c9ea09da55
    line: 188
    col: 0
    score: 0.86
  - uuid: 10780cdc-5036-4e8a-9599-a11703bc30c9
    line: 176
    col: 0
    score: 0.86
  - uuid: 10780cdc-5036-4e8a-9599-a11703bc30c9
    line: 144
    col: 0
    score: 0.86
  - uuid: 10780cdc-5036-4e8a-9599-a11703bc30c9
    line: 159
    col: 0
    score: 0.86
  - uuid: 4d8cbf01-e44a-452f-96a0-17bde7b416a8
    line: 130
    col: 0
    score: 0.85
  - uuid: 7d584c12-7517-4f30-8378-34ac9fc3a3f8
    line: 32
    col: 0
    score: 0.85
  - uuid: 4316c3f9-551f-4872-b5c5-98ae73508535
    line: 336
    col: 0
    score: 0.85
  - uuid: 004a0f06-3808-4421-b9e1-41b5b41ebcb8
    line: 194
    col: 0
    score: 0.85
  - uuid: 0c501d52-ba38-42aa-ad25-2d78425dfaff
    line: 272
    col: 0
    score: 0.85
---
Hell yes. Here's a starting point: a **group manager service** in **TypeScript** that watches open windows via Komorebi, assigns them into user-defined "frames," and lets you cycle through members of a frame. ^ref-dd89372d-1-0

We‚Äôll keep it minimal to start ‚Äî just the **core logic for grouping windows and cycling through them**. Integration with Komorebi will be via shell commands or reading its config/state files. Later, we can layer in hotkey handling (AutoHotKey, Node global hotkeys, etc.). ^ref-dd89372d-3-0

---

## üìÇ File Layout (starter)

```
group-manager/
‚îú‚îÄ‚îÄ main.ts                  # Entry point
‚îú‚îÄ‚îÄ groups.ts                # Logic for grouping windows
‚îú‚îÄ‚îÄ komorebi.ts              # Komorebi CLI wrappers
‚îú‚îÄ‚îÄ types.ts                 # Shared types
‚îî‚îÄ‚îÄ state.json               # Current layout state
```
^ref-dd89372d-9-0 ^ref-dd89372d-17-0

---

## üß† Concept
 ^ref-dd89372d-22-0
* A **FrameGroup** is a set of window IDs. ^ref-dd89372d-23-0
* Only **one window per group is visible** at a time. ^ref-dd89372d-24-0
* `cycleGroup(groupName)` will hide current, show next.
 ^ref-dd89372d-26-0
We'll use `komorebic` (the CLI tool for Komorebi) to control windows. You must have `komorebic.exe` in your `PATH`.

---

## üìú `types.ts`
 ^ref-dd89372d-32-0
```ts
export type WindowId = number;

export interface FrameGroup {
  name: string;
  members: WindowId[];
  currentIndex: number;
}
^ref-dd89372d-32-0
```

---

## üìú `groups.ts` ^ref-dd89372d-46-0

```ts
import { FrameGroup, WindowId } from './types';
import * as fs from 'fs';

const stateFile = './state.json';

let groups: Record<string, FrameGroup> = {};

function loadState() {
  if (fs.existsSync(stateFile)) {
    groups = JSON.parse(fs.readFileSync(stateFile, 'utf-8'));
  }
}

function saveState() {
  fs.writeFileSync(stateFile, JSON.stringify(groups, null, 2));
}

export function addWindowToGroup(groupName: string, winId: WindowId) {
  loadState();
  if (!groups[groupName]) {
    groups[groupName] = { name: groupName, members: [], currentIndex: 0 };
  }
  if (!groups[groupName].members.includes(winId)) {
    groups[groupName].members.push(winId);
  }
  saveState();
}

export function cycleGroup(groupName: string) {
  loadState();
  const group = groups[groupName];
  if (!group || group.members.length === 0) return;

  const currentWin = group.members[group.currentIndex];
  hideWindow(currentWin);

  group.currentIndex = (group.currentIndex + 1) % group.members.length;
  const nextWin = group.members[group.currentIndex];
  showWindow(nextWin);

  saveState();
}

^ref-dd89372d-46-0
import { hideWindow, showWindow } from './komorebi';
```

---
 ^ref-dd89372d-97-0
## üìú `komorebi.ts`

```ts
import { execSync } from 'child_process';

export function hideWindow(id: number) {
  try {
    execSync(`komorebic hide ${id}`);
  } catch (e) {
    console.error(`Failed to hide window ${id}`, e);
  }
}

export function showWindow(id: number) {
  try {
    execSync(`komorebic show ${id}`);
  } catch (e) {
    console.error(`Failed to show window ${id}`, e);
  }
}

export function listWindows(): number[] {
  try {
    const output = execSync(`komorebic query -w`).toString();
    const windows = JSON.parse(output);
    return windows.map((w: any) => w.handle);
  } catch (e) {
    console.error('Failed to list windows', e);
    return [];
^ref-dd89372d-97-0
  }
}
```

--- ^ref-dd89372d-132-0

## üìú `main.ts`

```ts
import { listWindows } from './komorebi';
import { addWindowToGroup, cycleGroup } from './groups';

const args = process.argv.slice(2);

const command = args[0];

if (command === 'group') {
  const groupName = args[1];
  const winId = parseInt(args[2]);

  if (!groupName || isNaN(winId)) {
    console.log('Usage: group <groupName> <windowId>');
    process.exit(1);
  }

  addWindowToGroup(groupName, winId);
  console.log(`Window ${winId} added to group ${groupName}`);
}

if (command === 'cycle') {
  const groupName = args[1];
  if (!groupName) {
    console.log('Usage: cycle <groupName>');
    process.exit(1);
  }
^ref-dd89372d-132-0

  cycleGroup(groupName);
}
```
 ^ref-dd89372d-168-0
---

## üöÄ Example Usage

```bash
# Add some windows
node main.js group code 123456
^ref-dd89372d-168-0
node main.js group code 654321 ^ref-dd89372d-177-0

# Cycle visible window in that group
node main.js cycle code
```

You can wire these into **hotkeys via AutoHotKey or PowerToys** later, or even bind them into Komorebi‚Äôs own keybind system if you want tight integration.

--- ^ref-dd89372d-185-0
 ^ref-dd89372d-186-0
## üß™ Next Steps ^ref-dd89372d-187-0

* Add a JSON config for predefined groups/layouts
* Implement layout recall
* Integrate with global hotkeys
* Use `window-query` or similar for better metadata on windows
* Optional GUI overlay or debug console ^ref-dd89372d-193-0

--- ^ref-dd89372d-195-0

## üè∑Ô∏è Tags ^ref-dd89372d-197-0

\#window-manager #komorebi #typescript #tiling-windows #npu-compatibility #devtools #windows #custom-wm #framesimulation #obsidian-note #uxdesign ^ref-dd89372d-199-0

Let me know if you want a Hy or Sibilant version next, or if we should rig this into a persistent system tray app with real-time window tracking.
