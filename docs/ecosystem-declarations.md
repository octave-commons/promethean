# Ecosystem Declarations

Agents describe the services they need in a small `.ecosystem.js` file. Each
file exports a PM2-compatible config generated by `ecosystem-loader.js`.

```js
import loadEcosystem from "./ecosystem-loader.js";

export default loadEcosystem({
  services: [
    { name: "stt", command: ["pipenv", "run", "python", "-m", "service"], cwd: "services/py/stt" },
    // ...other services
  ],
});
```

The declaration schema supports:

- `name` – process name in PM2
- `command` – array form of the command to run
- `cwd` – working directory for the service
- `env` – optional environment variables

Start an agent with:

```bash
pm2 start duck.ecosystem.js
```

See [MIGRATION_PLAN.md](./MIGRATION_PLAN.md) for pending decisions around
global PM2 configuration and Makefile integration. In the interim, Makefile
`start` and `stop` targets should call `pm2 start <agent>.ecosystem.js` and
`pm2 delete <agent>` respectively.
