---
uuid:
title: Fix Kanban Config Path Resolution
status: icebox
priority: P1
tags: [bug, cli, config, kanban]
description: The kanban CLI has broken config path resolution - it only searches for promethean.kanban.json in directory tree but should check multiple locations including docs/agile/tasks/, docs/agile/, docs/, and repo root
type: bug
points: 3
dependencies: []
assignees: []
created: "2025-10-08T15:30:00.000Z"
updated: "2025-10-08T15:45:00.000Z"
---

## Context

The kanban CLI is failing to resolve config paths correctly from subdirectories. Currently it only searches for `promethean.kanban.json` in the directory tree, but should check multiple standard locations:

- `docs/agile/tasks/promethean.kanban.json`
- `docs/agile/promethean.kanban.json`
- `docs/promethean.kanban.json`
- `promethean.kanban.json`

## Problem

The `searchConfigUp()` function in `packages/kanban/src/board/config/sources.ts` only searches for `DEFAULT_CONFIG_BASENAME` ("promethean.kanban.json") in the directory tree. This causes failures when running kanban commands from subdirectories.

Error message: "Failed to load transition rules config: ENOENT"

## Solution

1. Modify `findConfigPath()` function in `sources.ts` to search additional locations
2. Update config resolution logic to try multiple config file locations in priority order
3. Ensure backward compatibility with existing config locations
4. Test config resolution from various subdirectories in the monorepo

## Acceptance Criteria

- [ ] Kanban commands work from any subdirectory in the repository
- [ ] Config files are found in all standard locations
- [ ] Backward compatibility maintained for existing setups
- [ ] Error messages provide clear feedback when config not found
- [ ] Tests cover config resolution from different starting directories

## Technical Details

**Files to modify:**

- `packages/kanban/src/board/config/sources.ts` - Main config path resolution logic
- `packages/kanban/src/board/config/shared.ts` - Update constants if needed

**Key functions:**

- `findConfigPath()` - Needs enhancement for multiple search patterns
- `searchConfigUp()` - Current implementation only searches one basename

**Search priority order:**

1. `docs/agile/tasks/promethean.kanban.json` (task-specific config)
2. `docs/agile/promethean.kanban.json` (agile directory config)
3. `docs/promethean.kanban.json` (docs directory config)
4. `promethean.kanban.json` (repo root config - current behavior)
