---
title: Mount REST, GraphQL, WebSocket, and MCP adapters in omni-service
description: Integrate all omni adapters into the unified service with proper routing and shared context
type: implementation
priority: P2
points: 4
status: todo
tags: [omni, service, adapters, integration]
dependencies: [implement-omni-auth-rbac]
assignees: []
created: 2025-10-08T16:10:00.000Z
updated: 2025-10-08T16:10:00.000Z
---

## Context

With the base service and auth system in place, we need to mount the various omni adapters (REST, GraphQL, WebSocket, MCP) under a unified service with shared context and routing.

## Definition of Done

- [ ] REST API adapter mounted at `/rest` prefix
- [ ] GraphQL endpoint at `/graphql` with playground
- [ ] WebSocket server at `/ws` with auth integration
- [ ] MCP HTTP transport at `/mcp`
- [ ] Shared request context across all adapters
- [ ] Unified error handling and logging
- [ ] Health checks for each adapter

## Technical Details

**Routing Structure:**

```
GET  /health          # Overall service health
GET  /rest/*          # REST API routes
POST /graphql         # GraphQL endpoint
WS   /ws              # WebSocket connections
POST /mcp/*           # MCP HTTP transport
```

**Shared Context:**

- User authentication state
- Request correlation IDs
- Logging context
- Rate limiting state
- Service configuration

**Adapter Integration:**

- Import from @promethean/omni-rest (when available)
- Import from @promethean/omni-graphql (when available)
- Import from @promethean/omni-websocket (when available)
- Import from @promethean/omni-mcp (when available)

## Acceptance Criteria

- All adapters respond correctly on their routes
- Auth context is shared across adapters
- GraphQL playground is accessible in development
- WebSocket connections authenticate properly
- MCP endpoints handle JSON-RPC requests
- Service health check includes adapter status
- Error responses are consistent across adapters
