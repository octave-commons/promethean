---
uuid: "02c78938-cf9c-45a0-b5ff-6e7a212fb043"
title: "Fix Kanban Column Underscore Normalization Bug"
slug: "Fix Kanban Column Underscore Normalization Bug"
status: "in_progress"
priority: "P1"
labels: ["kanban", "column", "bug", "fix", "completed"]
created_at: "Sun Oct 12 2025 18:59:36 GMT-0500 (Central Daylight Time)"
estimates:
  complexity: ""
  scale: ""
  time_to_completion: ""
lastCommitSha: "501f608b329497937ed6e1c089246d211ad3b073"
commitHistory:
  -
    sha: "501f608b329497937ed6e1c089246d211ad3b073"
    timestamp: "2025-10-19 10:41:14 -0500\n\ndiff --git a/docs/agile/tasks/create-consolidated-package-structure.md b/docs/agile/tasks/create-consolidated-package-structure.md\nindex 1c71ceeed..6c2fedb8b 100644\n--- a/docs/agile/tasks/create-consolidated-package-structure.md\n+++ b/docs/agile/tasks/create-consolidated-package-structure.md\n@@ -2,7 +2,7 @@\n uuid: \"4f276b91-5107-4a58-9499-e93424ba2edd\"\n title: \"Create Consolidated Package Structure\"\n slug: \"create-consolidated-package-structure\"\n-status: \"review\"\n+status: \"testing\"\n priority: \"P0\"\n labels: [\"package-structure\", \"consolidation\", \"setup\", \"foundation\", \"epic1\"]\n created_at: \"2025-10-18T00:00:00.000Z\"\n@@ -10,6 +10,14 @@ estimates:\n   complexity: \"\"\n   scale: \"\"\n   time_to_completion: \"\"\n+lastCommitSha: \"249419d5dc0e006fe65357d326ff195705690bee\"\n+commitHistory:\n+  -\n+    sha: \"249419d5dc0e006fe65357d326ff195705690bee\"\n+    timestamp: \"2025-10-19 10:41:13 -0500\\n\\ndiff --git a/docs/agile/tasks/Fix Type Safety Crisis in @promethean opencode-client.md b/docs/agile/tasks/Fix Type Safety Crisis in @promethean opencode-client.md\\nindex 45d04f99e..892f4dd24 100644\\n--- a/docs/agile/tasks/Fix Type Safety Crisis in @promethean opencode-client.md\\t\\n+++ b/docs/agile/tasks/Fix Type Safety Crisis in @promethean opencode-client.md\\t\\n@@ -1,13 +1,21 @@\\n ---\\n uuid: \\\"a1b2c3d4-e5f6-7890-abcd-ef1234567890\\\"\\n-title: \\\"Fix Type Safety Crisis in @promethean/opencode-client\\\"\\n+title: \\\"Foundation & Interface Alignment - Testing Transition Rule\\\"\\n slug: \\\"Fix Type Safety Crisis in @promethean opencode-client\\\"\\n-status: \\\"incoming\\\"\\n+status: \\\"icebox\\\"\\n priority: \\\"P0\\\"\\n-labels: [\\\"opencode-client\\\", \\\"type-safety\\\", \\\"typescript\\\", \\\"critical\\\", \\\"any-types\\\", \\\"code-quality\\\"]\\n+labels: [\\\"kanban\\\", \\\"transition-rules\\\", \\\"testing-coverage\\\", \\\"quality-gates\\\", \\\"foundation\\\", \\\"interface-alignment\\\", \\\"types\\\", \\\"infrastructure\\\"]\\n created_at: \\\"2025-10-19T15:33:44.383Z\\\"\\n estimates:\\n   complexity: \\\"\\\"\\n   scale: \\\"\\\"\\n   time_to_completion: \\\"\\\"\\n+lastCommitSha: \\\"d1e16642738cd5e083427c2740bd416767935c92\\\"\\n+commitHistory:\\n+  -\\n+    sha: \\\"d1e16642738cd5e083427c2740bd416767935c92\\\"\\n+    timestamp: \\\"2025-10-19 10:37:13 -0500\\\\n\\\\ndiff --git a/test-git-tracking.js b/test-git-tracking.js\\\\nnew file mode 100644\\\\nindex 000000000..91f872039\\\\n--- /dev/null\\\\n+++ b/test-git-tracking.js\\\\n@@ -0,0 +1,33 @@\\\\n+#!/usr/bin/env node\\\\n+\\\\n+// Simple test to verify git tracking fields are added to task frontmatter\\\\n+import { TaskGitTracker } from './packages/kanban/dist/lib/task-git-tracker.js';\\\\n+\\\\n+// Test the git tracker\\\\n+const tracker = new TaskGitTracker();\\\\n+\\\\n+// Test creating a commit entry\\\\n+const commitEntry = tracker.createCommitEntry('test-uuid-123', 'create', 'Test task creation');\\\\n+\\\\n+console.log('Commit entry created:', JSON.stringify(commitEntry, null, 2));\\\\n+\\\\n+// Test updating frontmatter\\\\n+const frontmatter = {\\\\n+  uuid: 'test-uuid-123',\\\\n+  title: 'Test Task',\\\\n+  status: 'incoming',\\\\n+  created_at: '2025-10-19T15:00:00.000Z',\\\\n+};\\\\n+\\\\n+const updatedFrontmatter = tracker.updateTaskCommitTracking(\\\\n+  frontmatter,\\\\n+  'test-uuid-123',\\\\n+  'create',\\\\n+  'Test task creation',\\\\n+);\\\\n+\\\\n+console.log('Updated frontmatter:', JSON.stringify(updatedFrontmatter, null, 2));\\\\n+\\\\n+// Test validation\\\\n+const validation = tracker.validateTaskCommitTracking(updatedFrontmatter);\\\\n+console.log('Validation result:', validation);\\\"\\n+    message: \\\"fix(test-git-tracking): update test to verify git tracking fields in ...\\\"\\n+    author: \\\"Error\\\"\\n+    type: \\\"status_change\\\"\\n ---\"\n+    message: \"Change task status: a1b2c3d4-e5f6-7890-abcd-ef1234567890 - Foundation & Interface Alignment - Testing Transition Rule - icebox â†’ icebox\"\n+    author: \"Error\"\n+    type: \"status_change\"\n ---\n \n ## ðŸ“¦ Create Consolidated Package Structure"
    message: "Change task status: 4f276b91-5107-4a58-9499-e93424ba2edd - Create Consolidated Package Structure - review â†’ testing"
    author: "Error"
    type: "status_change"
---

Fixed underscore normalization bug in kanban column names. The issue was that the board's columnKey() function and the transition rules' normalizeColumnName() method were producing different results for column names with spaces and hyphens. Both now consistently convert spaces and hyphens to underscores, ensuring consistent behavior across CLI commands and transition rules. Test case confirms all variations now match.
