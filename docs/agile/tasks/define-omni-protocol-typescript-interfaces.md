---
uuid: "0bd7c181-50b1-4376-8461-dba469df8aec"
title: "Define Omni protocol TypeScript interfaces and types"
slug: "define-omni-protocol-typescript-interfaces"
status: "done"
priority: "P1"
labels: ["interfaces", "omni", "protocol", "typescript"]
created_at: "2025-10-12T22:46:41.458Z"
estimates:
  complexity: ""
  scale: ""
  time_to_completion: ""
---




























































































































































































































































































































































































## üéØ Outcome

Translate the Omni protocol specification into comprehensive TypeScript interfaces covering all method families, request/response types, error envelopes, and streaming events.

## üì• Inputs

- `docs/architecture/omni/omni-protocol-spec.md`
- Existing SmartGPT bridge type definitions for reference
- Package scaffold from previous task

## ‚úÖ Definition of Done

- [x] `RequestContext` interface with all required fields
- [x] Success and error envelope types (`SuccessEnvelope<T>`, `ErrorEnvelope`)
- [x] Complete interface definitions for all 8 method families:
  - Files (listDirectory, treeDirectory, viewFile, writeContent, writeLines, scheduleReindex)
  - Search (grep, semantic, web)
  - Sinks (list, search)
  - Indexer (status, control)
  - Agents (list, start, status, tail, control, streamLogs)
  - Exec (run)
  - GitHub (rest, graphql, rateLimit)
  - Metadata (openapi, health)
- [x] Stream event types (`StreamEvent<T,D>`) and all event data types
- [x] Supporting types (FileEntry, GrepHit, SemanticHit, AgentHandle, etc.)
- [x] Method metadata interface for introspection
- [x] All interfaces properly exported from `src/index.ts`
- [x] TypeScript compilation successful with strict type checking

## üöß Constraints

- Must maintain backward compatibility with existing `/v1` response shapes
- Interfaces should be transport-agnostic
- Use generic types where appropriate for reusability
- Include comprehensive JSDoc comments for public APIs

## ü™ú Steps

1. Create `src/types/` directory structure
2. Define core envelope types and RequestContext
3. Implement interfaces for each method family in separate files
4. Create supporting data types (FileEntry, AgentStatus, etc.)
5. Define streaming event types and data structures
6. Create method metadata interface
7. Add comprehensive JSDoc documentation
8. Export all types from main index file
9. Run TypeScript compilation to verify correctness

## üßÆ Story Points

4

---

## üîó Related Epics

- [[author-omni-protocol-package]]

---

## ‚õìÔ∏è Blocked By

- [scaffold-omni-protocol-package](docs/agile/tasks/scaffold-omni-protocol-package.md)

---

## ‚õìÔ∏è Blocks

- [implement-omni-protocol-zod-validation](docs/agile/tasks/implement-omni-protocol-zod-validation.md)

---

## üîç Relevant Links

- `docs/architecture/omni/omni-protocol-spec.md`
- Existing SmartGPT bridge type definitions
- TypeScript interface best practices

## üìù Completion Notes

‚úÖ **COMPLETED** - All TypeScript interfaces have been implemented and verified:

- ‚úÖ RequestContext interface with all required fields
- ‚úÖ Success and error envelope types (`SuccessEnvelope<T>`, `ErrorEnvelope`)
- ‚úÖ Complete interface definitions for all 8 method families:
  - Files (listDirectory, treeDirectory, viewFile, writeContent, writeLines, scheduleReindex)
  - Search (grep, semantic, web) 
  - Sinks (list, search)
  - Indexer (status, control)
  - Agents (list, start, status, tail, control, streamLogs)
  - Exec (run)
  - GitHub (rest, graphql, rateLimit)
  - Metadata (openapi, health)
- ‚úÖ Stream event types (`StreamEvent<T,D>`) and all event data types
- ‚úÖ Supporting types (FileEntry, GrepHit, SemanticHit, AgentHandle, etc.)
- ‚úÖ Method metadata interface for introspection
- ‚úÖ All interfaces properly exported from `src/index.ts`
- ‚úÖ TypeScript compilation successful with strict type checking

**Location**: `packages/omni-protocol/src/types/methods.ts`, `envelopes.ts`, `streaming.ts`



























































































































































































































































































































































































