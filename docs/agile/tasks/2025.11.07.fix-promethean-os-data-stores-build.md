uuid: "f3836aa4-c7e3-48c4-a54c-3753e5975fd8"
title: "Fix @promethean-os/data-stores build"
slug: "fix-promethean-os-data-stores-build"
status: "todo"
priority: "P1"
labels: ["build-fix", "tsc", "data"]
created_at: "2025-11-08T02:03:16Z"
estimates:
  complexity: ""
  scale: ""
  time_to_completion: ""
---

## Summary
- Tests import `__setContextStoreDualFactoryForTests` that no longer exists and several test helpers implicitly use `any`, causing TS errors.
- Impact: `pnpm build` remains red for @promethean-os/data-stores.

## Failure Evidence
- TS2305: Module '@promethean-os/persistence' has no exported member '__setContextStoreDualFactoryForTests'
- TS7006/TS2554 errors in data-store-manager.test.ts

## Required Actions
1. Update tests to new persistence API or expose suitable helpers
2. Annotate helper parameters to satisfy strict mode
3. Ensure build/test pass

## Acceptance Criteria
- Build command `pnpm --filter @promethean-os/data-stores build` completes without errors
- Root `pnpm build` no longer reports this package as failing
- Tests or smoke checks relevant to @promethean-os/data-stores pass
