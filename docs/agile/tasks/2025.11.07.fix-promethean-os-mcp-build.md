uuid: "5ff81eba-3847-4c13-a16c-85898468d820"
title: "Fix @promethean-os/mcp build"
slug: "fix-promethean-os-mcp-build"
status: "todo"
priority: "P1"
labels: ["build-fix", "tsc", "mcp"]
created_at: "2025-11-08T02:03:16Z"
estimates:
  complexity: ""
  scale: ""
  time_to_completion: ""
---

## Summary
- Auth/OAuth adapters contain dozens of typing issues: wrong literal types, missing fastify cookie APIs, readonly arrays, duplicate identifiers.
- Impact: `pnpm build` remains red for @promethean-os/mcp.

## Failure Evidence
- TS2322/TS2353/TS2339 errors in mcp-auth-adapter.ts
- TS2339: FastifyReply.setCookie not found
- Duplicate identifier 'onAuthSuccess' in oauth-login.ts

## Required Actions
1. Align MCP auth types with Fastify APIs and clean up duplicate declarations
2. Re-run build

## Acceptance Criteria
- Build command `pnpm --filter @promethean-os/mcp build` completes without errors
- Root `pnpm build` no longer reports this package as failing
- Tests or smoke checks relevant to @promethean-os/mcp pass
