piper: run JS steps in worker threads to isolate stdout/env and fix semaphore serialization
