# Fix kanban created_at timestamp preservation during task operations

## Root Cause

The `toFrontmatter` function in `packages/kanban/src/lib/kanban.ts` was using `t.created_at ?? NOW_ISO()` which would generate a new timestamp whenever `created_at` was undefined or null, even when we were trying to preserve an existing timestamp.

## Changes Made

### 1. Fixed `toFrontmatter` function (line 1009)

- **Before**: `created_at: ${quoteYamlString(t.created_at ?? NOW_ISO())}`
- **After**: `created_at: ${quoteYamlString(t.created_at)}`

### 2. Fixed `fallbackTaskFromRaw` function (line 978)

- **Before**: `created_at: getValue('created_at') ?? NOW_ISO()`
- **After**: `created_at: getValue('created_at')`

### 3. Enhanced preservation logic in `updateStatus` function (line 854)

- **Before**: `const preservedCreatedAt = existingCreatedAt || found.created_at;`
- **After**: `const preservedCreatedAt = existingCreatedAt || found.created_at || NOW_ISO();`

### 4. Enhanced preservation logic in `pushToTasks` function (line 1270)

- **Before**: `const preservedCreatedAt = existingCreatedAt || task.created_at;`
- **After**: `const preservedCreatedAt = existingCreatedAt || task.created_at || NOW_ISO();`

### 5. Fixed `taskFromFM` function (line 401)

- **Before**: `created_at: pickString(fm, ['created_at', 'created', 'txn']) ?? fm.created_at ?? NOW_ISO()`
- **After**: `created_at: fm.created_at ?? pickString(fm, ['created_at', 'created', 'txn']) ?? NOW_ISO()`

### 6. Added export for `toFrontmatter` function

- Added `export { toFrontmatter };` to enable testing

## Impact

- ✅ Original `created_at` timestamps are now preserved during all task operations
- ✅ Status updates no longer overwrite creation timestamps
- ✅ Board push/pull operations maintain timestamp integrity
- ✅ New tasks still get proper timestamps when none exist
- ✅ Backward compatibility maintained

## Testing

Verified that the original timestamp (2025-10-12T23:41:48.142Z) is preserved in task files even after multiple status updates and operations.

## Files Modified

- `packages/kanban/src/lib/kanban.ts` - Core timestamp preservation fixes
