- refactor attachment embedding to accept configuration, download attachments, and embed real content using type-specific models
